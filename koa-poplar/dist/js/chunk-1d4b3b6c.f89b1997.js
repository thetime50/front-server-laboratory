(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d4b3b6c"],{"0d77":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"component-signin flex-layout justify-start"},[e.username?[s("div",{staticClass:"user flex-none"},[e._v("\r\n            用户："+e._s(e.username)+"\r\n        ")]),s("div",{staticClass:"flex-none"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.logout()}}},[e._v("注销")])],1),s("div",{staticClass:"flex-none"},[e._v("\r\n            用户表：\r\n        ")]),s("userlist",{staticClass:"flex-auto"})]:[s("div",{staticClass:"title"},[e._v("登录")]),s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"名称",prop:"name"}},[s("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("登录")]),s("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)]],2)},n=[],o=(s("5ab2"),s("6d57"),s("e10e"),s("ce3c")),a=s("9f3a"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"component-userlist scroll-y"},e._l(e.users,(function(t,r){return s("li",{key:t._id},[e._v("\r\n        "+e._s(r+1)+"."+e._s(t.username)+"\r\n        "),s("el-button",{on:{click:function(t){return e.del_user(r)}}},[e._v("删除")])],1)})),0)},u=[],c={name:"userlist",data:function(){return{users:[]}},created:function(){var e=this;this.axios.getUser().then((function(t){401===t.status?e.$store.dispatch("UserLogout"):e.users=t.data.result}))},methods:{del_user:function(e,t){var s=this,r={id:this.users[e]._id};this.axios.delUser(r).then((function(t){s.$message({type:"success",message:"删除成功"}),s.users.splice(e,1)})).catch((function(e){console.log(e)}))}}},l=c,m=(s("a754"),s("9ca4")),f=Object(m["a"])(l,i,u,!1,null,"0a3b7d22",null),p=f.exports;function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={name:"signin",components:{userlist:p},data:function(){var e=this;return{ruleForm:{name:"",pass:""},rules:{name:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],pass:[{required:!0,validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}]}}},computed:b({},Object(a["b"])(["username"])),methods:{resetForm:function(){this.$refs.ruleForm.resetFields()},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.axios.userLogin(e.ruleForm).then((function(t){var s=t.data;if(!1!==s.info){if(s.success){e.$message({type:"success",message:"登录成功"});s.token,s.username;e.$store.dispatch("UserInfo",b(b({},s),{},{uid:s._id}))}}else e.$message({type:"info",message:"账号不存在"})}))}))},logout:function(){this.$store.dispatch("UserLogout"),this.$store.state.token?this.$message({type:"info",message:"登出失败"}):this.$message({type:"success",message:"登出成功"})}}},h=g,v=(s("7a99"),Object(m["a"])(h,r,n,!1,null,"8c43a5fc",null));t["default"]=v.exports},"69a8":function(e,t,s){},"7a99":function(e,t,s){"use strict";var r=s("69a8"),n=s.n(r);n.a},a754:function(e,t,s){"use strict";var r=s("e6b8"),n=s.n(r);n.a},e6b8:function(e,t,s){}}]);
//# sourceMappingURL=chunk-1d4b3b6c.f89b1997.js.map