(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42caf899"],{"06a2":function(e,t,n){"use strict";var r=n("fc81")(!0);n("492d")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},"0844":function(e,t,n){!function(t,n){e.exports=n()}(window,(function(){return n={},e.m=t=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGNS="http://www.w3.org/2000/svg"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a,s,l,c=n(4),u=n(3);function f(){var e=null!==s&&s.apply(this,arguments)||this;return e.entities=new Map,e.nextId=0,e}a=t.Base||(t.Base={}),s=u.EventEmitter,o(f,s),Object.defineProperty(f.prototype,"json",{get:function(){var e,t,n=[];try{for(var r=i(this.values()),o=r.next();!o.done;o=r.next()){var a=o.value;"json"in a?n.push(a.json):n.push(JSON.parse(JSON.stringify(a)))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this.entities.size},enumerable:!0,configurable:!0}),f.prototype.get=function(e){return c.assert(this.has(e),"There's no Entity which id="+e+" in repo!"),this.entities.get(e)},f.prototype.has=function(e){return this.entities.has(e)},f.prototype.set=function(e,t){var n=this.has(e);return this.entities.set(e,t),n?this.emit("updated",t):(this.nextId<e+1&&(this.nextId=e+1),this.emit("created",t)),this},f.prototype.add=function(e){if("id"in e){var t=e.id;return c.assert(!this.has(t),"reAdd "+t+"!"),null===t?(e.id=this.nextId,this.add(e)):(this.set(t,e),t)}var n=this.nextId;return this.set(n,e),n},f.prototype[Symbol.iterator]=function(){return this.entities[Symbol.iterator]()},f.prototype.delete=function(e){if("number"==typeof e&&this.has(e)){var t=this.get(e);return this.entities.delete(e),this.emit("removed",t),!0}return"number"!=typeof e&&"id"in e&&this.delete(e.id)},f.prototype.values=function(){return this.entities.values()},l=f,a.Repository=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(Object.defineProperty(o.prototype,"isSome",{get:function(){return null!==this.value},enumerable:!0,configurable:!0}),o.prototype.map=function(e){return null===this.value?new o(null):new o(e(this.value))},o.prototype.flatMap=function(e){return null===this.value?new o(null):a(e(this.value).toNullable())},o.prototype.orElse=function(e){return null===this.value?e:this.value},o.prototype.toNullable=function(){return this.value},o.prototype.match=function(e,t){return this.isSome?e:t},o);function o(e){this.value=e}function i(e){return new r(e)}function a(e){return null==e?t.none:i(e)}t.Option=r,t.none=new r(null),t.some=i,t.fromNullable=a,t.fromTry=function(e){try{return i(e())}catch(e){return t.none}}},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}((e.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,i,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(o=c(e))&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,e))}.bind(r);return o.listener=n,r.wrapFn=o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):p(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(0<t.length&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shadeColor=function(e,t){var n=parseInt(e.slice(1),16),r=Math.min((n>>16)+(n>>16)*t/100,255),o=Math.min((n>>8&255)+(n>>8&255)*t/100,255);return"#"+(Math.min((255&n)+(255&n)*t/100,255)|o<<8|r<<16).toString(16)},t.addAlpha=function(e,t){var n=parseInt(e.slice(1),16);return"rgba("+(n>>16)+","+(n>>8&255)+","+(255&n)+","+t+"%)"}},function(e,t,n){"use strict";function r(){this.layer=0}Object.defineProperty(t,"__esModule",{value:!0}),t.TopContextUser=r,t.overLaps=function e(t,n){return t.layer===n.layer&&(t.left>n.left?e(n,t):!(t.left+t.width<n.left))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=n(0),c=n(1),u=n(5);!function(e){var t,n=(t=s.TopContextUser,o(r,t),Object.defineProperty(r.prototype,"id",{get:function(){return this.store.id},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineIn",{get:function(){return this.contextIn.belongTo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"view",{get:function(){return this.lineIn.view},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"highLightWidth",{get:function(){return this.view.contentWidth(this.store.startIndex,this.store.endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"highLightLeft",{get:function(){return this.view.contentWidth(this.lineIn.startIndex,this.store.startIndex)+this.lineIn.view.paddingLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"middle",{get:function(){return this.highLightLeft+this.highLightWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labelLeft",{get:function(){return this.middle-this.labelWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labelRight",{get:function(){return this.middle+this.labelWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"labelWidth",{get:function(){return this.view.labelFont.widthOf(this.store.category.text)+this.config.labelPadding+2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return"max"===this.config.labelWidthCalcMethod?this.labelWidth>this.highLightWidth?this.labelLeft:this.highLightLeft:this.labelLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return"max"===this.config.labelWidthCalcMethod?this.labelWidth>this.highLightWidth-1?this.labelWidth:this.highLightWidth-1:this.labelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"annotationY",{get:function(){return-this.view.topContextLayerHeight*(this.layer-1)-(this.view.labelFont.lineHeight+2+2*this.config.labelPadding+this.config.bracketWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"globalY",{get:function(){return this.lineIn.y+this.annotationY},enumerable:!0,configurable:!0}),r.prototype.render=function(){var e;this.svgElement=document.createElementNS(l.SVGNS,"g"),(e=this.svgElement.classList).add.apply(e,a(this.config.labelClasses));var t=this.createHighLightElement(),n=this.createAnnotationElement(),r=this.view.topContextLayerHeight*(this.layer-1),o=this.createBracketElement(this.highLightWidth,-r,0,-r,this.config.bracketWidth);return this.svgElement.appendChild(t),this.svgElement.appendChild(n),this.svgElement.appendChild(o),this.svgElement},r.prototype.update=function(){this.svgElement.style.transform="translate("+this.highLightLeft+"px,"+this.lineIn.y+"px)"},r.prototype.remove=function(){this.svgElement.remove()},r.prototype.createHighLightElement=function(){var e=document.createElementNS(l.SVGNS,"rect"),t=this.store.category.color;return e.setAttribute("height",this.lineIn.view.contentFont.lineHeight.toString()),e.setAttribute("width",this.highLightWidth.toString()),e.setAttribute("fill",/^#/g.test(t)?u.addAlpha(t,70):t),e},r.prototype.createBracketElement=function(e,t,n,r,o,i){void 0===i&&(i=.6);var a=e-n,s=t-r,c=Math.sqrt(a*a+s*s),u=e+i*o*(s/=c),f=t-i*o*(a/=c),h=e-.25*c*a+(1-i)*o*s,d=t-.25*c*s-(1-i)*o*a,p=e-.5*c*a+o*s,y=t-.5*c*s-o*a,v=n+i*o*s,b=r-i*o*a,m=e-.75*c*a+(1-i)*o*s,g=t-.75*c*s-(1-i)*o*a,x=document.createElementNS(l.SVGNS,"path");return x.setAttribute("d","M"+e+","+t+"Q"+u+","+f+","+h+","+d+"T"+p+","+y+"M"+n+","+r+"Q"+v+","+b+","+m+","+g+"T"+p+","+y),x.setAttribute("fill","none"),x.setAttribute("stroke",this.store.category.borderColor),x},r.prototype.createAnnotationElement=function(){var e=this,t=this.view.labelCategoryElementFactoryRepository.get(this.store.category.id).create();return t.style.transform="translate("+(this.highLightWidth-this.labelWidth)/2+"px,"+this.annotationY+"px)",t.onclick=function(t){e.view.root.emit("labelClicked",e.id,t)},t.ondblclick=function(t){e.view.root.emit("labelDoubleClicked",e.id,t)},t.oncontextmenu=function(t){e.view.root.emit("labelRightClicked",e.id,t),t.preventDefault()},t.onmouseenter=function(){e.svgElement.classList.add("hover"),Array.from(e.store.connectionsFrom).map((function(t){return e.view.connectionViewRepository.get(t.id)})).map((function(e){return e.addHover("from")})),Array.from(e.store.connectionsTo).map((function(t){return e.view.connectionViewRepository.get(t.id)})).map((function(e){return e.addHover("to")}))},t.onmouseleave=function(){e.svgElement.classList.remove("hover"),Array.from(e.store.connectionsFrom).map((function(t){return e.view.connectionViewRepository.get(t.id)})).map((function(e){return e.removeHover("from")})),Array.from(e.store.connectionsTo).map((function(t){return e.view.connectionViewRepository.get(t.id)})).map((function(e){return e.removeHover("to")}))},t},r);function r(e,n,r){var o=t.call(this)||this;return o.store=e,o.contextIn=n,o.config=r,o.layer=0,o.svgElement=null,o}e.Entity=n;var i,f=(i=c.Base.Repository,o(h,i),h.prototype.get=function(e){return this.entities.get(e)},h);function h(){return null!==i&&i.apply(this,arguments)||this}e.Repository=f}(t.LabelView||(t.LabelView={}))},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);!function(e){var t=(Object.defineProperty(n.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),n.prototype.move=function(e){this._startIndex+=e,this._endIndex+=e},Object.defineProperty(n.prototype,"category",{get:function(){return this.root.labelCategoryRepo.get(this.categoryId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"json",{get:function(){return{id:this.id,categoryId:this.categoryId,startIndex:this.startIndex,endIndex:this.endIndex}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sameLineConnections",{get:function(){var e,t,n=[];try{for(var r=i(this.root.connectionRepo.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.priorLabel===this&&n.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"connectionsFrom",{get:function(){var e,t,n=new Set;try{for(var r=i(this.root.connectionRepo.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.from===this&&n.add(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"connectionsTo",{get:function(){var e,t,n=new Set;try{for(var r=i(this.root.connectionRepo.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.to===this&&n.add(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allConnections",{get:function(){return new Set(Array.prototype.concat(Array.from(this.connectionsFrom),Array.from(this.connectionsTo)))},enumerable:!0,configurable:!0}),n);function n(e,t,n,r,o){this.id=e,this.categoryId=t,this._startIndex=n,this._endIndex=r,this.root=o}e.Entity=t;var r,s,l=(r=a.Base.Repository,o(c,r),c.prototype.set=function(e,t){return this.againstMultipleLabelWith(t)?console.warn("try set a label against the againstMultipleLabelWith rule!"):r.prototype.set.call(this,e,t),this},c.prototype.add=function(e){return this.againstMultipleLabelWith(e)?(console.warn("try add a label against the againstMultipleLabelWith rule!"),-1):r.prototype.add.call(this,e)},c.prototype.againstMultipleLabelWith=function(e){function t(e,t){return e.startIndex===t.startIndex&&e.endIndex===t.endIndex}var n="notAllowed"===this.config.allowMultipleLabel?t:function(e,n){return t(e,n)&&e.categoryId==n.categoryId};return Array.from(this.values()).some((function(t){return n(t,e)}))},c.prototype.getEntitiesInRange=function(e,t){return Array.from(this.entities.values()).filter((function(n){return e<=n.startIndex&&n.endIndex<=t}))},c.prototype.getEntitiesCross=function(e){return Array.from(this.entities.values()).filter((function(t){return t.startIndex<=e&&e<t.endIndex}))},c);function c(e){var t=r.call(this)||this;return t.config=e,t}function u(e,n){return new t(e.id,e.categoryId,e.startIndex,e.endIndex,n)}e.Repository=l,(s=e.Factory||(e.Factory={})).create=u,s.createAll=function(e,t){return e.map((function(e){return u(e,t)}))}}(t.Label||(t.Label={}))},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);!function(e){var t=(Object.defineProperty(n.prototype,"category",{get:function(){return this.root.connectionCategoryRepo.get(this.categoryId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"from",{get:function(){return this.root.labelRepo.get(this.fromId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"to",{get:function(){return this.root.labelRepo.get(this.toId)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"priorLabel",{get:function(){return this.from.startIndex<this.to.startIndex?this.from:this.to},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"posteriorLabel",{get:function(){return this.from.startIndex>=this.to.startIndex?this.from:this.to},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"json",{get:function(){return{id:this.id,categoryId:this.categoryId,fromId:this.fromId,toId:this.toId}},enumerable:!0,configurable:!0}),n);function n(e,t,n,r,o){this.id=e,this.categoryId=t,this.fromId=n,this.toId=r,this.root=o}e.Entity=t;var r,a,s=(r=i.Base.Repository,o(l,r),l.prototype.set=function(e,t){return this.againstMultipleConnectionRuleWith(t)?console.warn("try set a label against the checkMultipleLabel rule!"):r.prototype.set.call(this,e,t),this},l.prototype.add=function(e){return this.againstMultipleConnectionRuleWith(e)?(console.warn("try add a label against the checkMultipleLabel rule!"),-1):r.prototype.add.call(this,e)},l.prototype.againstMultipleConnectionRuleWith=function(e){function t(e,t){return e.from===t.from&&e.to===t.to}var n="notAllowed"===this.config.allowMultipleConnection?t:function(e,n){return t(e,n)&&e.categoryId==n.categoryId};return Array.from(this.values()).some((function(t){return n(t,e)}))},l);function l(e){var t=r.call(this)||this;return t.config=e,t}function c(e,n){return new t(e.id,e.categoryId,e.fromId,e.toId,n)}e.Repository=s,(a=e.Factory||(e.Factory={})).create=c,a.createAll=function(e,t){return e.map((function(e){return c(e,t)}))}}(t.Connection||(t.Connection={}))},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(0),c=n(6);!function(e){var t,n=(t=c.TopContextUser,o(r,t),Object.defineProperty(r.prototype,"id",{get:function(){return this.store.id},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineIn",{get:function(){return this.contextIn.belongTo},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"view",{get:function(){return this.lineIn.view},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sameLineLabelView",{get:function(){return this.view.labelViewRepository.get(this.store.priorLabel.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mayNotSameLineLabelView",{get:function(){return this.view.labelViewRepository.get(this.store.posteriorLabel.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"fromLabelView",{get:function(){return this.view.labelViewRepository.get(this.store.from.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"toLabelView",{get:function(){return this.view.labelViewRepository.get(this.store.to.id)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"leftLabelView",{get:function(){return this.fromLabelView.labelLeft<this.toLabelView.labelLeft?this.fromLabelView:this.toLabelView},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rightLabelView",{get:function(){return this.fromLabelView.labelLeft>=this.toLabelView.labelLeft?this.fromLabelView:this.toLabelView},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"middle",{get:function(){return(this.leftLabelView.labelLeft+this.rightLabelView.labelRight)/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.view.connectionFont.widthOf(this.store.category.text)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"textLeft",{get:function(){return this.middle-this.textWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineIncludedWidth",{get:function(){return this.fromLabelView.labelLeft<this.toLabelView.labelLeft?this.toLabelView.labelRight-this.fromLabelView.labelLeft:this.fromLabelView.labelRight-this.toLabelView.labelLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lineIncludedLeft",{get:function(){return this.fromLabelView.labelLeft<this.toLabelView.labelLeft?this.fromLabelView.labelLeft:this.toLabelView.labelLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return"text"===this.config.connectionWidthCalcMethod?this.textWidth:this.lineIncludedWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"left",{get:function(){return"text"===this.config.connectionWidthCalcMethod?this.textLeft:this.lineIncludedLeft},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"globalY",{get:function(){return this.lineIn.y-this.layer*this.view.topContextLayerHeight},enumerable:!0,configurable:!0}),r.prototype.render=function(){var e=this;this.svgElement=document.createElementNS(l.SVGNS,"g");var t=this.view.connectionCategoryElementFactoryRepository.get(this.store.category.id).create();return this.svgElement.appendChild(t),this.svgElement.style.cursor="pointer",this.svgElement.onclick=function(t){e.view.root.emit("connectionClicked",e.id,t)},this.svgElement.ondblclick=function(t){e.view.root.emit("connectionDoubleClicked",e.id,t)},this.svgElement.oncontextmenu=function(t){e.view.root.emit("connectionRightClicked",e.id,t),t.preventDefault()},this.svgElement.onmouseenter=function(){e.svgElement.classList.add("hover"),e.lineElement.classList.add("hover")},this.svgElement.onmouseleave=function(){e.svgElement.classList.remove("hover"),e.lineElement.classList.remove("hover")},this.renderLine(),this.svgElement},r.prototype.update=function(){this.svgElement.style.transform="translate("+this.textLeft+"px,"+this.globalY+"px)",this.updateLine()},r.prototype.addHover=function(e){this.svgElement.classList.add("hover-"+e),this.lineElement.classList.add("hover-"+e)},r.prototype.removeHover=function(e){this.svgElement.classList.remove("hover-"+e),this.lineElement.classList.remove("hover-"+e)},r.prototype.remove=function(){this.svgElement.remove(),this.lineElement.remove()},r.prototype.updateLine=function(){var e=this.globalY+this.view.topContextLayerHeight/2-this.view.labelFont.fontSize+2;this.fromLabelView.labelLeft<this.toLabelView.labelLeft?this.lineElement.setAttribute("d","\n                    M "+(this.fromLabelView.labelLeft+1)+"   "+(this.fromLabelView.globalY+1)+"\n                    C "+(this.fromLabelView.labelLeft-8)+"  "+e+",\n                      "+(this.fromLabelView.labelLeft-8)+"  "+e+",\n                      "+(this.fromLabelView.labelLeft+1)+"   "+e+"\n                    L "+(this.toLabelView.labelLeft+this.toLabelView.labelWidth)+" "+e+"\n                    C "+(this.toLabelView.labelLeft+this.toLabelView.labelWidth+8)+"  "+e+",\n                      "+(this.toLabelView.labelLeft+this.toLabelView.labelWidth+8)+"  "+e+",\n                      "+(this.toLabelView.labelLeft+this.toLabelView.labelWidth)+"   "+(this.toLabelView.globalY-1)+"\n                "):this.lineElement.setAttribute("d","\n                    M "+(this.fromLabelView.labelRight-1)+"   "+(this.fromLabelView.globalY+1)+"\n                    C "+(this.fromLabelView.labelRight+8)+"  "+e+",\n                      "+(this.fromLabelView.labelRight+8)+"  "+e+",\n                      "+(this.fromLabelView.labelRight-1)+"   "+e+"\n                    L "+this.toLabelView.labelLeft+"          "+e+"\n                    C "+(this.toLabelView.labelLeft-8)+"  "+e+",\n                      "+(this.toLabelView.labelLeft-8)+"  "+e+",\n                      "+this.toLabelView.labelLeft+"   "+(this.toLabelView.globalY-1)+"\n                ")},r.prototype.renderLine=function(){var e;this.lineElement=document.createElementNS(l.SVGNS,"path"),(e=this.lineElement.classList).add.apply(e,a(this.config.connectionClasses.map((function(e){return e+"-line"})))),this.lineElement.setAttribute("fill","none"),this.lineElement.style.markerEnd="url(#marker-arrow)",this.updateLine(),this.contextIn.backgroundElement.appendChild(this.lineElement)},r);function r(e,n,r){var o=t.call(this)||this;return o.store=e,o.contextIn=n,o.config=r,o.svgElement=null,o.lineElement=null,o}e.Entity=n;var i,u=(i=s.Base.Repository,o(f,i),f);function f(){return null!==i&&i.apply(this,arguments)||this}e.Repository=u}(t.ConnectionView||(t.ConnectionView={}))},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i,a,s=n(0);function l(e,t,n,r,o,i){this.fontFamily=e,this.fontSize=t,this.fontWeight=n,this.lineHeight=r,this.topToBaseLine=o,this.width=i}i=t.Font||(t.Font={}),l.prototype.widthOf=function(e){var t=this;return"string"==typeof e?this.widthOf(Array.from(e)):e.map((function(e){return t.width.get(e)})).reduce((function(e,t){return e+t}),0)},a=l,i.ValueObject=a,function(e){function t(e,t,n){var r=new Map,o=new Set(e);o.delete("\n");var i=Array.from(o);t.textContent=i.join(""),t.parentNode.parentNode.insertBefore(n,t.parentNode),i.forEach((function(e,n){r.set(e,t.getExtentOfChar(n).width)}));var s=n.getBoundingClientRect().top-t.getBoundingClientRect().top,l=parseFloat(window.getComputedStyle(t).fontSize),c=window.getComputedStyle(t).fontFamily,u=window.getComputedStyle(t).fontWeight,f=t.getBoundingClientRect().height;return new a(c,l,u,f,s,r)}e.create=t;var n=(r.prototype.thanCreate=function(e,n){var r,i;(r=this.measuringElement.classList).add.apply(r,o(e));var a=t(n,this.measuringElement,this.baseLineReferenceElement);return(i=this.measuringElement.classList).remove.apply(i,o(e)),this.result.push(a),this},r.prototype.endBatch=function(){return this.baseLineReferenceElement.remove(),this.measuringElement.remove(),this.result},r);function r(e,t){this.svgElement=e,this.textElement=t,this.baseLineReferenceElement=document.createElementNS(s.SVGNS,"rect"),this.baseLineReferenceElement.setAttribute("width","1px"),this.baseLineReferenceElement.setAttribute("height","1px"),this.svgElement.appendChild(this.baseLineReferenceElement),this.measuringElement=document.createElementNS(s.SVGNS,"tspan"),this.textElement.appendChild(this.measuringElement),this.result=[]}e.startBatch=function(e,t){return new n(e,t)}}(i.Factory||(i.Factory={})),(i.Service||(i.Service={})).measureMore=function(e,t,n,r){var i,a=new Set(t);a.delete("\n");var l=Array.from(a).filter((function(t){return!e.width.has(t)}));if(0<l.length){var c=document.createElementNS(s.SVGNS,"tspan");(i=c.classList).add.apply(i,o(n)),c.textContent=l.join(""),r.appendChild(c),l.forEach((function(t,n){e.width.set(t,c.getExtentOfChar(n).width)})),c.remove()}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.Annotator=r.Annotator;var o=n(27),i=n(28),a=n(29),s={Connection:o.Connection,Label:i.Label,Content:a.Content};t.Action=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(3),s=n(14),l=n(17),c=n(0),u=n(24),f=n(25),h=n(26),d=(i=a.EventEmitter,o(p,i),p.prototype.applyAction=function(e){e.apply(this.store)},p.prototype.export=function(){this.view.contentEditor.hide();var e=this.view.svgElement.outerHTML.replace(/&nbsp;/," ");return this.view.contentEditor.show(),e},p.prototype.remove=function(){this.view.svgElement.remove(),this.store.config.contentEditable&&this.view.contentEditor.remove()},p);function p(e,t,n){var r=i.call(this)||this;r.containerElement=t,r.configInput=n;var o=u.parseInput(n||{});r.store=new s.Store(o),r.store.json="string"==typeof e?JSON.parse(e):e;var a=document.createElementNS(c.SVGNS,"svg");return a.setAttribute("xmlns",c.SVGNS),t.appendChild(a),r.view=new l.View(r,a,o),r.textSelectionHandler=new f.TextSelectionHandler(r,o),r.twoLabelsClickedHandler=new h.TwoLabelsClickedHandler(r,o),r}t.Annotator=d},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(15),s=n(8),l=n(16),c=n(9),u=n(3),f=(i=u.EventEmitter,o(h,i),Object.defineProperty(h.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"json",{get:function(){return{content:this._content,labelCategories:this.labelCategoryRepo.json,labels:this.labelRepo.json,connectionCategories:this.connectionCategoryRepo.json,connections:this.connectionRepo.json}},set:function(e){var t=this;this._content=e.content.endsWith("\n")?e.content:e.content+"\n",a.LabelCategory.Factory.createAll(e.labelCategories,this.config).map((function(e){return t.labelCategoryRepo.add(e)})),s.Label.Factory.createAll(e.labels,this).map((function(e){return t.labelRepo.add(e)})),e.connectionCategories.map((function(e){return t.connectionCategoryRepo.add(e)})),c.Connection.Factory.createAll(e.connections,this).map((function(e){return t.connectionRepo.add(e)}))},enumerable:!0,configurable:!0}),h.prototype.contentSlice=function(e,t){return this.content.slice(e,t)},h.prototype.moveLabels=function(e,t){Array.from(this.labelRepo.values()).filter((function(t){return t.startIndex>=e})).map((function(e){return e.move(t)}))},h.prototype.spliceContent=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=e+t;if(0===t||void 0===Array.from(this.labelRepo.values()).find((function(t){return t.startIndex<=e&&e<t.endIndex||t.startIndex<o&&o<t.endIndex}))){var i=this.content.slice(0,e),a=this.content.slice(e,e+t),s=n.join(""),l=this.content.slice(e+t);this._content=i+s+l,this.moveLabels(e+t,s.length-a.length),this.emit("contentSpliced",e,a,s)}},h);function h(e){var t=i.call(this)||this;return t._content="",t.config=e,t.labelCategoryRepo=new a.LabelCategory.Repository,t.labelRepo=new s.Label.Repository(e),t.connectionCategoryRepo=new l.ConnectionCategory.Repository,t.connectionRepo=new c.Connection.Repository(e),t}t.Store=f},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a,s,l,c=n(1),u=n(5);function f(){return null!==a&&a.apply(this,arguments)||this}function h(e,t){var n=e.borderColor,r=e.color;return!e.borderColor&&e["border-color"]&&(n=e["border-color"]),e.color||(r=t),e.borderColor||(n=u.shadeColor(r,-30)),{id:e.id,text:e.text,color:r,borderColor:n}}i=t.LabelCategory||(t.LabelCategory={}),a=c.Base.Repository,o(f,a),l=f,i.Repository=l,(s=i.Factory||(i.Factory={})).create=h,s.createAll=function(e,t){return e.map((function(e){return h(e,t.defaultLabelColor)}))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a,s,l=n(1);function c(){return null!==a&&a.apply(this,arguments)||this}i=t.ConnectionCategory||(t.ConnectionCategory={}),a=l.Base.Repository,o(c,a),s=c,i.Repository=s},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(18),l=n(11),c=n(21),u=n(7),f=n(10),h=n(22),d=n(23),p=n(2),y=(v.layoutTopContextsAfter=function(e){for(;e.next.isSome;)e.topContext.update(),e=e.next.toNullable();e.topContext.update()},v.prototype.constructLabelViewsForLine=function(e){var t=this,n=this.store.labelRepo.getEntitiesInRange(e.startIndex,e.endIndex).map((function(n){return new u.LabelView.Entity(n,e.topContext,t.config)}));return n.map((function(e){return t.labelViewRepository.add(e)})),n.map((function(t){return e.topContext.addChild(t)})),n},v.prototype.constructConnectionsForLine=function(e){var t=this;return this.store.labelRepo.getEntitiesInRange(e.startIndex,e.endIndex).map((function(n){var r=n.sameLineConnections.filter((function(e){return!t.connectionViewRepository.has(e.id)})).map((function(n){return new f.ConnectionView.Entity(n,e.topContext,t.config)}));return r.map((function(e){return t.connectionViewRepository.add(e)})),r.map((function(t){return e.topContext.addChild(t)})),r})).reduce((function(e,t){return e.concat(t)}),[])},Object.defineProperty(v.prototype,"height",{get:function(){var e=this;return this.lines.reduce((function(t,n){return t+n.height+e.contentFont.fontSize*(e.config.lineHeight-1)}),20)},enumerable:!0,configurable:!0}),v.createMarkerElement=function(){var e=document.createElementNS(a.SVGNS,"path");e.setAttribute("d","M0,4 L0,8 L6,6 L0,4 L0,8"),e.setAttribute("stroke","#000000"),e.setAttribute("fill","#000000");var t=document.createElementNS(a.SVGNS,"marker");return t.setAttribute("id","marker-arrow"),t.setAttribute("markerWidth","8"),t.setAttribute("markerHeight","10"),t.setAttribute("orient","auto"),t.setAttribute("refX","5"),t.setAttribute("refY","6"),t.appendChild(e),t},v.prototype.contentWidth=function(e,t){return this.contentFont.widthOf(this.store.contentSlice(e,t))},v.prototype.removeLine=function(e){var t=this;e.remove(),e.topContext.children.forEach((function(e){e instanceof u.LabelView.Entity?t.labelViewRepository.delete(e):e instanceof f.ConnectionView.Entity&&t.connectionViewRepository.delete(e)}))},v.prototype.registerEventHandlers=function(){var e=this;this.textElement.onmouseup=function(t){"Range"===window.getSelection().type?e.root.textSelectionHandler.textSelected():e.config.contentEditable&&e.contentEditor.caretChanged(t.clientY)},this.store.labelRepo.on("created",this.onLabelCreated.bind(this)),this.store.labelRepo.on("removed",(function(t){var n=e.labelViewRepository.get(t.id);n.lineIn.topContext.removeChild(n),n.remove(),e.labelViewRepository.delete(n),n.lineIn.topContext.update(),n.lineIn.update(),v.layoutTopContextsAfter(n.lineIn),e.config.contentEditable&&e.contentEditor.update()})),this.store.connectionRepo.on("created",this.onConnectionCreated.bind(this)),this.store.connectionRepo.on("removed",(function(t){var n=e.connectionViewRepository.get(t.id);n.lineIn.topContext.removeChild(n),n.remove(),e.connectionViewRepository.delete(n),n.lineIn.topContext.update(),n.lineIn.update(),v.layoutTopContextsAfter(n.lineIn),e.config.contentEditable&&e.contentEditor.update()})),this.config.contentEditable&&this.store.on("contentSpliced",this.onContentSpliced.bind(this))},v.prototype.rerenderLines=function(e,t){for(var n,r,a,l,c,u,f,h=this.lines[0].svgElement.parentElement,d=e;d<=t;++d)this.removeLine(this.lines[d]);var y=this.lines[e],v=this.lines[t],b=s.Line.Service.divide(this,y.startIndex,v.endIndex);for(0!==b.length&&(b[0].last=y.last,y.last.map((function(e){return e.next=p.some(b[0])})),b[b.length-1].next=v.next,v.next.map((function(e){return e.last=p.some(b[b.length-1])})),(n=this.lines).splice.apply(n,o([e,t-e+1],b)),0===e?v.next.isSome?b[0].insertBefore(v.next):b[0].insertInto(h):b[0].insertAfter(y.last)),d=1;d<b.length;++d)b[d].insertAfter(p.some(b[d-1]));function m(e){g.constructLabelViewsForLine(e).map((function(t){return e.topContext.renderChild(t)}))}var g=this;try{for(var x=i(b),w=x.next();!w.done;w=x.next())m(L=w.value)}catch(e){r={error:e}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(r)throw r.error}}function _(e){C.constructConnectionsForLine(e).map((function(t){return e.topContext.renderChild(t)}))}var C=this;try{for(var E=i(b),S=E.next();!S.done;S=E.next())_(L=S.value)}catch(e){l={error:e}}finally{try{S&&!S.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}try{for(var I=i(b),j=I.next();!j.done;j=I.next()){var L;(L=j.value).update(),L.topContext.update()}}catch(e){u={error:e}}finally{try{j&&!j.done&&(f=I.return)&&f.call(I)}finally{if(u)throw u.error}}},v.prototype.onLabelCreated=function(e){var t=r(this.findRangeInLines(e.startIndex,e.endIndex),2),n=t[0];if(t[1]===n+1){var o=this.lines[n],i=new u.LabelView.Entity(e,o.topContext,this.config);this.labelViewRepository.add(i),o.topContext.addChild(i),o.topContext.renderChild(i),o.topContext.update(),o.update()}else{var a=this.findHardLineEndsInIndex(n);this.rerenderLines(n,a)}v.layoutTopContextsAfter(this.lines[n]),this.config.contentEditable&&this.contentEditor.update(),this.svgElement.style.height=this.height.toString()+"px"},v.prototype.findRangeInLines=function(e,t){var n=0,r=0;return this.lines.forEach((function(o,i){o.startIndex<=e&&e<o.endIndex&&(n=i),o.startIndex<=t-1&&t-1<o.endIndex&&(r=i+1)})),[n,r]},v.prototype.onConnectionCreated=function(e){var t=this.labelViewRepository.get(e.priorLabel.id),n=t.lineIn.topContext,r=new f.ConnectionView.Entity(e,n,this.config);this.connectionViewRepository.add(r),n.addChild(r),n.renderChild(r),n.update(),t.lineIn.update(),v.layoutTopContextsAfter(t.lineIn),this.config.contentEditable&&this.contentEditor.update(),this.svgElement.style.height=this.height.toString()+"px"},v.prototype.onContentSpliced=function(e,t,n){""!==t&&this.onRemoved(e,t),""!==n&&this.onInserted(e,n)},v.prototype.onRemoved=function(e,t){var n=r(this.findRangeInLines(e,e+1),2),o=n[0];n[1],this.lines[o].startIndex===e-t.length?this.lines[o].move(-t.length):this.lines[o].inserted(-t.length);for(var i=o+1;i<this.lines.length;)this.lines[i].move(-t.length),++i;var a=this.findHardLineEndsInIndex(o);if("\n"===t&&this.lines[o].isBlank){var s=this.lines[o].last,l=this.lines[o].next;this.lines[o].remove(),this.lines.splice(o,1),s.map((function(e){return e.next=l})),l.map((function(e){return e.last=s}))}else this.rerenderLines(o,a);v.layoutTopContextsAfter(this.lines[a-1]);var c=Array.from(t).filter((function(e){return"\n"===e})).length;0===c?(this.contentEditor.characterIndex-=t.length,this.contentEditor.avoidInLabel("forward")):0<=this.contentEditor.lineIndex-c&&(this.contentEditor.lineIndex-=c,this.contentEditor.characterIndex=this.contentEditor.line.content.length,this.contentEditor.avoidInLabel("forward")),this.contentEditor.update(),this.svgElement.style.height=this.height.toString()+"px"},v.prototype.onInserted=function(e,t){var n=r(this.findRangeInLines(e,e+1),2),o=n[0];n[1],this.lines[o].startIndex===e+t.length?this.lines[o].move(t.length):this.lines[o].inserted(t.length);for(var i=o+1;i<this.lines.length;)this.lines[i].move(t.length),++i;var a=this.findHardLineEndsInIndex(o);this.rerenderLines(o,a),v.layoutTopContextsAfter(this.lines[a]);var s=Array.from(t),l=s.filter((function(e){return"\n"===e})).length,c=s.lastIndexOf("\n"),u=t.length-c;0===l?this.contentEditor.characterIndex+=t.length:(this.contentEditor.lineIndex+=l,this.contentEditor.characterIndex=u-1),this.contentEditor.avoidInLabel("forward"),this.contentEditor.update(),this.svgElement.style.height=this.height.toString()+"px"},v.prototype.findHardLineEndsInIndex=function(e){var t;for(t=e;t<this.lines.length-1&&!this.lines[t].endWithHardLineBreak;++t);return t},v.prototype.collectStyle=function(){var e=document.createElementNS(a.SVGNS,"style"),t="\n        "+this.config.contentClasses.map((function(e){return"."+e})).join(",")+" {\n            font-family: "+this.contentFont.fontFamily+";\n            font-weight: "+this.contentFont.fontWeight+";\n            font-size: "+this.contentFont.fontSize+"px;\n            line-height: "+this.contentFont.lineHeight+"px;\n        }\n        ",n="\n        "+this.config.labelClasses.map((function(e){return"."+e})).join(",")+" {\n            font-family: "+this.labelFont.fontFamily+";\n            font-weight: "+this.labelFont.fontWeight+";\n            font-size: "+this.labelFont.fontSize+"px;\n        }\n        ",r=this.config.connectionClasses.map((function(e){return"."+e})).join(","),o=this.config.connectionClasses.map((function(e){return"."+e+"-line"})).join(","),i="\n        "+r+" {\n            font-family: "+this.connectionFont.fontFamily+";\n            font-weight: "+this.connectionFont.fontWeight+";\n            font-size: "+this.connectionFont.fontSize+"px;\n        }\n        "+o+" {\n            stroke: #000;\n        }\n        ";return e.innerHTML=t+n+i,e},Object.defineProperty(v.prototype,"paddingLeft",{get:function(){var e=this;return Math.max.apply(Math,o(Array.from(this.store.labelCategoryRepo.values()).map((function(t){return e.labelFont.widthOf(t.text)}))))/2+1},enumerable:!0,configurable:!0}),v);function v(e,t,n){var i,p,y;this.root=e,this.svgElement=t,this.config=n,this.contentEditor=null,this.store=e.store,this.labelViewRepository=new u.LabelView.Repository,this.connectionViewRepository=new f.ConnectionView.Repository,this.markerElement=v.createMarkerElement(),this.svgElement.appendChild(this.markerElement),this.textElement=document.createElementNS(a.SVGNS,"text"),this.textElement.style.whiteSpace="pre",this.textElement.style.wordWrap="normal",this.svgElement.appendChild(this.textElement);var b=Array.from(this.store.labelCategoryRepo.values()).map((function(e){return e.text})).join(""),m=Array.from(this.store.connectionCategoryRepo.values()).map((function(e){return e.text})).join("");i=r(l.Font.Factory.startBatch(t,this.textElement).thanCreate(n.contentClasses,this.store.content).thanCreate(n.labelClasses,b).thanCreate(n.connectionClasses,m).endBatch(),3),this.contentFont=i[0],this.labelFont=i[1],this.connectionFont=i[2];var g=this.labelFont.lineHeight+2+2*n.labelPadding+n.bracketWidth;this.topContextLayerHeight=2*n.topContextMargin+Math.max(g,this.connectionFont.lineHeight),(p=this.textElement.classList).add.apply(p,o(n.contentClasses)),this.labelCategoryElementFactoryRepository=new c.LabelCategoryElement.FactoryRepository(this,n),this.connectionCategoryElementFactoryRepository=new h.ConnectionCategoryElement.FactoryRepository(this,n),this.lineMaxWidth=t.width.baseVal.value-2*this.paddingLeft,this.lines=s.Line.Service.divide(this,0,this.store.content.length),this.lines.map(this.constructLabelViewsForLine.bind(this)),this.lines.map(this.constructConnectionsForLine.bind(this));var x=this.lines.map((function(e){return e.render()}));if((y=this.textElement).append.apply(y,o(x)),this.svgElement.style.height=this.height.toString()+"px",this.registerEventHandlers(),this.config.contentEditable){this.contentEditor=new d.ContentEditor(this);var w=r(this.contentEditor.render(),2),_=w[0],C=w[1];this.svgElement.appendChild(_),this.svgElement.parentNode.insertBefore(C,this.svgElement)}this.svgElement.appendChild(this.collectStyle())}t.View=y},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(0),s=n(19),l=n(20);!function(e){var t=(Object.defineProperty(n.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),n.prototype.move=function(e){this._startIndex+=e,this._endIndex+=e},n.prototype.inserted=function(e){this._endIndex+=e},Object.defineProperty(n.prototype,"dy",{get:function(){return this.last.match(this.view.contentFont.fontSize*this.config.lineHeight,this.view.contentFont.topToBaseLine)+this.topContext.layer*this.view.topContextLayerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.topContext.layer*this.view.topContextLayerHeight+this.view.contentFont.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){var e=this;return l.takeWhile(this.view.lines,(function(t){return t!==e})).reduce((function(t,n){return t+n.height+e.view.contentFont.fontSize*(e.config.lineHeight-1)}),0)+this.topContext.layer*this.view.topContextLayerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBlank",{get:function(){return""===this.view.store.content.slice(this.startIndex,this.endIndex-1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this.endWithHardLineBreak?this.isBlank?"":this.view.store.content.slice(this.startIndex,this.endIndex-1):this.view.store.content.slice(this.startIndex,this.endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endWithHardLineBreak",{get:function(){return"\n"===this.view.store.content[this.endIndex-1]},enumerable:!0,configurable:!0}),n.prototype.update=function(){this.svgElement.innerHTML=this.content.replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.isBlank&&(this.svgElement.style.fontSize=this.view.contentFont.fontSize/4+"px"),this.svgElement.setAttribute("x",this.view.paddingLeft.toString()),this.svgElement.setAttribute("dy",this.dy.toString()+"px")},n.prototype.render=function(){this.svgElement=document.createElementNS(a.SVGNS,"tspan");var e=r(this.topContext.render(),2),t=e[0],n=e[1];return this.view.svgElement.insertBefore(t,this.view.textElement),this.view.markerElement.insertAdjacentElement("afterend",n),Object.assign(this.svgElement,{annotatorElement:this}),this.update(),this.svgElement},n.prototype.remove=function(){this.topContext.remove(),this.svgElement.remove()},n.prototype.insertBefore=function(e){var t=this;this.render(),e.map((function(e){e.svgElement.parentNode.insertBefore(t.svgElement,e.svgElement),e.topContext.svgElement.parentNode.insertBefore(t.topContext.svgElement,e.topContext.svgElement),e.topContext.backgroundElement.parentNode.insertBefore(t.topContext.backgroundElement,e.topContext.backgroundElement)}))},n.prototype.insertAfter=function(e){var t=this;this.render(),e.map((function(e){e.svgElement.insertAdjacentElement("afterend",t.svgElement),e.topContext.svgElement.insertAdjacentElement("afterend",t.topContext.svgElement),e.topContext.backgroundElement.insertAdjacentElement("afterend",t.topContext.backgroundElement)}))},n.prototype.insertInto=function(e){this.render(),e.appendChild(this.svgElement)},n);function n(e,t,n,r,o){this.last=n,this.next=r,this.view=o,this.svgElement=null,this._startIndex=e,this._endIndex=t,this.topContext=new s.TopContext(this),this.config=o.config}e.ValueObject=t;var c=(Object.defineProperty(u.prototype,"store",{get:function(){return this.view.store},enumerable:!0,configurable:!0}),u.prototype.divide=function(e,t){var n,r;this.init();var a=e,s=e+1;do{var l=this.mergeLabel(s),c=this.mergeWord(l),u=l===s&&l===c;"\n"===this.store.content[s-1]?(0===this.tokenQueue.length?this.reduce(s-1,s):this.reduce(this.tokenQueue[0].startIndex,s),a=s):u&&(this.shiftWithAutoReduce({startIndex:a,endIndex:s}),a=s),++s}while(a<t);function f(e){h.map((function(t){return t.next=i.some(e)})),e.last=h,h=i.some(e)}0!==this.tokenQueue.length&&this.reduce(this.tokenQueue[0].startIndex,this.tokenQueue[this.tokenQueue.length-1].endIndex);var h=i.none;try{for(var d=o(this.result),p=d.next();!p.done;p=d.next())f(p.value)}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return this.result},u.prototype.init=function(){this.result=[],this.tokenQueue=[]},u.prototype.mergeLabel=function(e){return this.store.labelRepo.getEntitiesCross(e-1).some((function(t){return t.endIndex>e}))?this.store.labelRepo.getEntitiesCross(e-1).filter((function(t){return t.endIndex>e})).sort((function(e,t){return t.endIndex-e.endIndex}))[0].endIndex:e},u.prototype.mergeWord=function(e){u.wordReg.lastIndex=0;var t=u.wordReg.exec(this.store.contentSlice(e-1,e+1));return null===t?e:2===t[0].length?e+1:e},u.prototype.reduce=function(t,n){var r=new e.ValueObject(t,n,i.none,i.none,this.view);this.result.push(r),this.tokenQueue=[]},u.prototype.shiftWithAutoReduce=function(e){var t=0===this.tokenQueue.length?0:this.view.contentWidth(this.tokenQueue[0].startIndex,this.tokenQueue[this.tokenQueue.length-1].endIndex),n=this.view.contentWidth(e.startIndex,e.endIndex);0!==this.tokenQueue.length&&t+n>this.view.lineMaxWidth&&this.reduce(this.tokenQueue[0].startIndex,this.tokenQueue[this.tokenQueue.length-1].endIndex),n>this.view.lineMaxWidth?(this.reduce(e.startIndex,e.endIndex),console.warn('the token "'+this.store.contentSlice(e.startIndex,e.endIndex)+'" is too long for a line!')):this.tokenQueue.push(e)},u.wordReg=/([a-zA-z][a-zA-Z0-9']*[-|.]?)|([+\-]?[0-9.][0-9.%]*)/g,u);function u(e){this.view=e,this.result=[],this.tokenQueue=[]}(e.Service||(e.Service={})).divide=function(e,t,n){return new c(e).divide(t,n)}}(t.Line||(t.Line={}))},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(6),l=n(10),c=n(4),u=n(7),f=(Object.defineProperty(h.prototype,"layer",{get:function(){return 0===this.children.size?0:Math.max.apply(Math,o(Array.from(this.children).map((function(e){return e.layer}))))},enumerable:!0,configurable:!0}),h.prototype.update=function(){var e=this;this.children.forEach((function(e){return e.update()})),Array.from(this.children).filter((function(e){return e instanceof u.LabelView.Entity})).map((function(t){t.store.allConnections.forEach((function(n){if(e.belongTo.view.connectionViewRepository.has(n.id)){var r=e.belongTo.view.connectionViewRepository.get(n.id);r.mayNotSameLineLabelView===t&&r.update()}}))}))},h.prototype.render=function(){var e=this;return this.svgElement=document.createElementNS(a.SVGNS,"g"),this.backgroundElement=document.createElementNS(a.SVGNS,"g"),this.children.forEach((function(t){e.renderChild(t)})),this.update(),[this.svgElement,this.backgroundElement]},h.prototype.addChild=function(e){var t,n,r=this.layer,o=!1;e instanceof l.ConnectionView.Entity&&(e.layer=e.sameLineLabelView.layer);do{++e.layer,o=!1;try{for(var a=(t=void 0,i(this.children)),c=a.next();!c.done;c=a.next()){var u=c.value;if(s.overLaps(e,u)){o=!0;break}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}while(o);return this.children.add(e),this.layer-r},h.prototype.renderChild=function(e){c.assert(this.children.has(e));var t=e.render();this.svgElement.appendChild(t)},h.prototype.removeChild=function(e){c.assert(this.children.has(e)),this.children.delete(e)},h.prototype.remove=function(){this.svgElement.remove(),this.backgroundElement.remove()},h);function h(e){this.backgroundElement=null,this.svgElement=null,this.children=new Set,this.belongTo=e}t.TopContext=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.lookup=function(e,t){return e.length<=t?r.none:r.some(e[t])},t.takeWhile=function(e,t){var n;for(n=0;n<e.length&&t(e[n]);++n);return e.slice(0,n)}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a,s,l,c,u=n(1),f=n(0),h=n(5);function d(e,t,n,r){this.store=e,this.font=t,this.padding=n,this.svgElement=document.createElementNS(f.SVGNS,"g");var o=document.createElementNS(f.SVGNS,"rect");o.setAttribute("fill",/^#/g.test(e.color)?h.addAlpha(e.color,r):e.color),o.setAttribute("stroke",e.borderColor),o.setAttribute("width",this.width.toString()),o.setAttribute("height",(t.lineHeight+2*n).toString()),o.setAttribute("rx",(2*n).toString()),o.style.cursor="pointer";var i=document.createElementNS(f.SVGNS,"text");i.style.userSelect="none",i.style.cursor="pointer",i.textContent=e.text,i.setAttribute("dx",n.toString()),i.setAttribute("dy",t.topToBaseLine+n+"px"),this.svgElement.appendChild(o),this.svgElement.appendChild(i)}function p(e,t){var n,r,o=l.call(this)||this;try{for(var a=i(e.store.labelCategoryRepo.values()),c=a.next();!c.done;c=a.next()){var u=c.value;o.add(new s(u,e.labelFont,t.labelPadding,t.labelOpacity))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}a=t.LabelCategoryElement||(t.LabelCategoryElement={}),Object.defineProperty(d.prototype,"width",{get:function(){return this.font.widthOf(this.store.text)+2*this.padding},enumerable:!0,configurable:!0}),d.prototype.create=function(){return this.svgElement.cloneNode(!0)},Object.defineProperty(d.prototype,"id",{get:function(){return this.store.id},enumerable:!0,configurable:!0}),s=d,l=u.Base.Repository,o(p,l),c=p,a.FactoryRepository=c},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var l,c,u,f,h=n(1),d=n(0);function p(e,t,n){var r;this.store=e,this.svgElement=document.createElementNS(d.SVGNS,"g");var o=document.createElementNS(d.SVGNS,"rect");o.setAttribute("fill","#ffffff"),o.setAttribute("width",t.widthOf(e.text).toString()),o.setAttribute("height",t.lineHeight.toString());var i=document.createElementNS(d.SVGNS,"text");(r=i.classList).add.apply(r,a(n)),i.textContent=e.text,i.setAttribute("dy",t.topToBaseLine+"px"),this.svgElement.appendChild(o),this.svgElement.appendChild(i)}function y(e,t){var n,r,o=u.call(this)||this;o.config=t;try{for(var i=s(e.store.connectionCategoryRepo.values()),a=i.next();!a.done;a=i.next()){var l=a.value;u.prototype.add.call(o,new c(l,e.connectionFont,t.connectionClasses))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}l=t.ConnectionCategoryElement||(t.ConnectionCategoryElement={}),Object.defineProperty(p.prototype,"id",{get:function(){return this.store.id},enumerable:!0,configurable:!0}),p.prototype.create=function(){return this.svgElement.cloneNode(!0)},c=p,u=h.Base.Repository,o(y,u),f=y,l.FactoryRepository=f},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(11),s=n(7),l=(Object.defineProperty(c.prototype,"characterIndex",{get:function(){return this._characterIndex},set:function(e){this.view.lines[this._lineIndex].isBlank?this._characterIndex=0:this._characterIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"lineIndex",{get:function(){return this._lineIndex},set:function(e){this._lineIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"line",{get:function(){return this.view.lines[this.lineIndex]},enumerable:!0,configurable:!0}),c.prototype.render=function(){var e=this;return this.constructCaretElement(),this.constructHiddenTextAreaElement(),this.parentSVGYOffset=this.view.svgElement.getBoundingClientRect().top-document.getElementsByTagName("html")[0].getBoundingClientRect().top,this.hiddenTextAreaElement.onkeyup=function(t){if(!e.inComposition){switch(t.key){case"ArrowLeft":0===e.characterIndex?e.line.last.isSome&&(--e.lineIndex,e.characterIndex=e.line.content.length):(--e.characterIndex,e.avoidInLabel("backward"));break;case"ArrowRight":e.characterIndex>=e.line.content.length||e.line.isBlank?e.line.next.isSome&&(++e.lineIndex,e.characterIndex=0):(++e.characterIndex,e.avoidInLabel("forward"));break;case"ArrowUp":e.line.last.isSome&&--e.lineIndex,e.characterIndex=Math.min(e.characterIndex,e.line.content.length),e.avoidInLabel("forward");break;case"ArrowDown":e.line.next.isSome&&++e.lineIndex,e.characterIndex=Math.min(e.characterIndex,e.line.content.length),e.avoidInLabel("forward");break;case"Backspace":var n=e.line.startIndex+e.characterIndex-1;e.view.root.emit("contentDelete",n,1);break;default:if(""!==e.hiddenTextAreaElement.value){a.Font.Service.measureMore(e.view.contentFont,e.hiddenTextAreaElement.value,e.view.config.contentClasses,e.view.textElement);var r=e.view.lines[e._lineIndex].startIndex+e.characterIndex;e.view.root.emit("contentInput",r,e.hiddenTextAreaElement.value),e.hiddenTextAreaElement.value=""}}e.update()}},this.hiddenTextAreaElement.addEventListener("compositionstart",(function(){e.inComposition=!0})),this.hiddenTextAreaElement.addEventListener("compositionend",(function(){e.inComposition=!1})),this.update(),this.hiddenTextAreaElement.style.opacity="0",[this.cursorElement,this.hiddenTextAreaElement]},c.prototype.avoidInLabel=function(e){for(var t=this.line.startIndex+this.characterIndex,n=Array.from(this.line.topContext.children).filter((function(e){return e instanceof s.LabelView.Entity})),r=n.find((function(e){return e.store.startIndex<=t-1&&t<e.store.endIndex}));void 0!==r;)"forward"===e?++this.characterIndex:--this.characterIndex,t=this.line.startIndex+this.characterIndex,r=n.find((function(e){return e.store.startIndex<=t-1&&t<e.store.endIndex}))},c.prototype.update=function(){var e=this.view.paddingLeft+this.view.contentFont.widthOf(this.line.content.slice(0,this.characterIndex));this.cursorElement.setAttribute("d","\n            M"+e+","+this.line.y+"\n            L"+e+","+(this.line.y+this.view.contentFont.lineHeight)+"\n        "),this.hiddenTextAreaElement.style.top=this.parentSVGYOffset+this.line.y+"px",this.hiddenTextAreaElement.style.left=this.cursorElement.getBoundingClientRect().left+"px"},c.prototype.caretChanged=function(e){var t=window.getSelection();if("Caret"===t.type){var n=document.querySelector("svg").getClientRects()[0];if(null!==t.anchorNode.parentNode){var r=t.anchorNode.parentNode.getExtentOfChar(0);if(n.top+r.y+this.view.contentFont.lineHeight<=e){var o=t.anchorNode.parentNode.nextSibling.annotatorElement;this._lineIndex=this.view.lines.indexOf(o),this.characterIndex=0,this.avoidInLabel("forward")}else o=t.anchorNode.parentNode.annotatorElement,this._lineIndex=this.view.lines.indexOf(o),this.characterIndex=t.anchorOffset,this.avoidInLabel("forward");this.update(),this.hiddenTextAreaElement.focus({preventScroll:!0})}}},c.prototype.constructHiddenTextAreaElement=function(){var e;this.hiddenTextAreaElement=document.createElement("textarea"),this.hiddenTextAreaElement.setAttribute("autocorrect","off"),this.hiddenTextAreaElement.setAttribute("autocapitalize","off"),this.hiddenTextAreaElement.setAttribute("spellcheck","false"),(e=this.hiddenTextAreaElement.classList).add.apply(e,o(this.view.config.contentClasses)),this.hiddenTextAreaElement.style.position="absolute",this.hiddenTextAreaElement.style.padding="0",this.hiddenTextAreaElement.style.width="100vw",this.hiddenTextAreaElement.style.height="1em",this.hiddenTextAreaElement.style.outline="none",this.hiddenTextAreaElement.style.zIndex="-1",this.hiddenTextAreaElement.style.borderStyle="none",this.hiddenTextAreaElement.style.fontFamily=this.view.contentFont.fontFamily,this.hiddenTextAreaElement.style.fontSize=this.view.contentFont.fontSize+"px",this.hiddenTextAreaElement.style.fontWeight=this.view.contentFont.fontWeight,this.hiddenTextAreaElement.style.opacity="0"},c.prototype.constructCaretElement=function(){this.cursorElement=document.createElementNS(i.SVGNS,"path"),this.cursorElement.setAttribute("stroke","#000000"),this.cursorElement.setAttribute("stroke-width","1.5"),this.cursorElement.style.animationName="cursor",this.cursorElement.style.animationDuration="0.75s",this.cursorElement.style.animationTimingFunction="ease-out",this.cursorElement.style.animationDirection="alternate",this.cursorElement.style.animationIterationCount="infinite"},c.prototype.hide=function(){this.cursorElement.style.display="none"},c.prototype.show=function(){this.cursorElement.style.display="inline"},c.prototype.remove=function(){this.hiddenTextAreaElement.remove()},c);function c(e){this.view=e,this.cursorElement=null,this.hiddenTextAreaElement=null,this.parentSVGYOffset=null;var t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.innerHTML="@keyframes cursor { from { opacity: 0; } to { opacity: 1; }  }",t.appendChild(n),this._lineIndex=0,this._characterIndex=0,this.inComposition=!1}t.ContentEditor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={contentClasses:["poplar-annotation-content"],labelClasses:["poplar-annotation-label"],connectionClasses:["poplar-annotation-connection"],labelPadding:2,lineHeight:1.5,topContextMargin:3,bracketWidth:8,allowMultipleLabel:"differentCategory",allowMultipleConnection:"differentCategory",labelWidthCalcMethod:"max",connectionWidthCalcMethod:"line",labelOpacity:90,defaultLabelColor:"#ff9d61",selectingAreaStrip:/[\n ]/,unconnectedLineStyle:"curve",contentEditable:!0};t.parseInput=function(e){var t={};for(var n in r)t[n]=void 0!==e[n]?e[n]:r[n];return t}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(4),a=(s.prototype.getSelectionInfo=function(){var e,t=this,n=window.getSelection();i.assert("Range"===n.type);var a,s,l,c,u=null,f=null;try{u=n.anchorNode.parentNode,f=n.focusNode.parentNode}catch(e){return null}try{if(a=u.annotatorElement,s=f.annotatorElement,a.view!==this.root.view||s.view!==this.root.view)return null;l=a.startIndex+n.anchorOffset,c=s.startIndex+n.focusOffset}catch(e){return null}return c<l&&(e=r([c,l],2),l=e[0],c=e[1]),o.fromNullable(this.config.selectingAreaStrip).map((function(e){for(;e.test(t.root.store.content[l]);)++l;for(;e.test(t.root.store.content[c-1]);)--c})),c<=l?null:{startIndex:l,endIndex:c}},s.prototype.textSelected=function(){var e,t=this.getSelectionInfo();t&&this.root.emit("textSelected",t.startIndex,t.endIndex),null===(e=window.getSelection())||void 0===e||e.removeAllRanges()},s);function s(e,t){this.root=e,this.config=t}t.TextSelectionHandler=a},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};function i(e,t){var n,r=this;this.root=e,this.config=t,this.lastSelection=s.none,this.svgElement=document.createElementNS(a.SVGNS,"path"),(n=this.svgElement.classList).add.apply(n,o(e.view.config.connectionClasses.map((function(e){return e+"-line"})))),this.svgElement.setAttribute("fill","none"),this.svgElement.style.markerEnd="url(#marker-arrow)",this.root.on("labelClicked",(function(e){r.lastSelection.isSome?(r.root.emit("twoLabelsClicked",r.lastSelection.toNullable().id,e),r.svgElement.remove(),r.svgElement.setAttribute("d",""),r.lastSelection=s.none):(r.lastSelection=s.some(r.root.view.labelViewRepository.get(e)),r.root.view.svgElement.insertBefore(r.svgElement,r.root.view.svgElement.firstChild))})),this.root.view.svgElement.onmousemove=function(e){r.lastSelection.map((function(n){var o=n.labelLeft+1,i=n.labelRight-1,a=n.globalY+1,s=e.clientX-r.root.view.svgElement.getBoundingClientRect().left,l=e.clientY-r.root.view.svgElement.getBoundingClientRect().top,c=(o+i)/2<s?o:i;if("straight"===t.unconnectedLineStyle)r.svgElement.setAttribute("d","\n                    M"+c+","+a+"\n                    L"+s+","+l+"\n                ");else if("curve"===t.unconnectedLineStyle){var u=(o-s)/4,f=Math.min(a,l)-20;r.svgElement.setAttribute("d","\n                        M"+c+","+a+"\n                        C"+(c-u)+","+f+","+(s+u)+","+f+","+s+","+l+"\n                    ")}}))},this.root.view.svgElement.oncontextmenu=function(e){r.lastSelection.map((function(){r.svgElement.remove(),r.svgElement.setAttribute("d",""),r.lastSelection=s.none,e.preventDefault()}))}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(2);t.TwoLabelsClickedHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);!function(e){var t=(n.prototype.apply=function(e){e.connectionRepo.add(new r.Connection.Entity(null,this.categoryId,this.fromId,this.toId,e))},n);function n(e,t,n){this.categoryId=e,this.fromId=t,this.toId=n}e.CreateConnectionAction=t,e.Create=function(e,n,r){return new t(e,n,r)};var o=(i.prototype.apply=function(e){e.connectionRepo.delete(this.id)},i);function i(e){this.id=e}function a(e){return new o(e)}e.DeleteConnectionAction=o,e.Delete=a;var s=(l.prototype.apply=function(e){var t=e.connectionRepo.get(this.connectionId);a(this.connectionId).apply(e),e.connectionRepo.add(new r.Connection.Entity(this.connectionId,this.categoryId,t.fromId,t.toId,e))},l);function l(e,t){this.connectionId=e,this.categoryId=t}e.UpdateConnectionAction=s,e.Update=function(e,t){return new s(e,t)}}(t.Connection||(t.Connection={}))},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);!function(e){var t=(n.prototype.apply=function(e){if(e.content.slice(this.startIndex,this.endIndex).includes("\n"))throw Error("Insert label across hard line is not supported now! Please remove the \\n in content first!");e.labelRepo.add(new o.Label.Entity(null,this.categoryId,this.startIndex,this.endIndex,e))},n);function n(e,t,n){this.categoryId=e,this.startIndex=t,this.endIndex=n}e.CreateLabelAction=t,e.Create=function(e,n,r){return new t(e,n,r)};var i=(a.prototype.apply=function(e){var t,n;try{for(var o=r(e.labelRepo.get(this.id).allConnections),i=o.next();!i.done;i=o.next()){var a=i.value;e.connectionRepo.delete(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}e.labelRepo.delete(this.id)},a);function a(e){this.id=e}function s(e){return new i(e)}e.DeleteLabelAction=i,e.Delete=s;var l=(c.prototype.apply=function(e){var t=e.labelRepo.get(this.labelId),n=t.allConnections;s(this.labelId).apply(e),e.labelRepo.add(new o.Label.Entity(this.labelId,this.categoryId,t.startIndex,t.endIndex,e)),n.forEach((function(t){return e.connectionRepo.add(t)}))},c);function c(e,t){this.labelId=e,this.categoryId=t}e.UpdateLabelAction=l,e.Update=function(e,t){return new l(e,t)}}(t.Label||(t.Label={}))},function(e,t,n){"use strict";var r,o;function i(e,t,n){this.startIndex=e,this.removeLength=t,this.insert=n}Object.defineProperty(t,"__esModule",{value:!0}),r=t.Content||(t.Content={}),i.prototype.apply=function(e){if(!e.config.contentEditable)throw Error("Content edition is not on!");e.spliceContent(this.startIndex,this.removeLength,this.insert)},o=i,r.SpliceAction=o,r.Splice=function(e,t,n){return new o(e,t,n)}}],e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(e){return t[e]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="",e(e.s=12);function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var t,n}))},"0b53":function(e,t,n){"use strict";var r=n("e7ad"),o=n("e042"),i=n("149f"),a=n("e46b"),s=n("bf16"),l=n("f71f").KEY,c=n("238a"),u=n("6798"),f=n("399f"),h=n("ec45"),d=n("cb3d"),p=n("a08d"),y=n("4d34"),v=n("f091"),b=n("2346"),m=n("69b3"),g=n("fb68"),x=n("008a"),w=n("09b9"),_=n("94b3"),C=n("cc33"),E=n("e005"),S=n("9370"),I=n("dcb7"),j=n("2f77"),L=n("064e"),O=n("80a9"),k=I.f,A=L.f,R=S.f,P=r.Symbol,V=r.JSON,M=V&&V.stringify,N="prototype",T=d("_hidden"),F=d("toPrimitive"),B={}.propertyIsEnumerable,D=u("symbol-registry"),W=u("symbols"),H=u("op-symbols"),$=Object[N],z="function"==typeof P&&!!j.f,G=r.QObject,U=!G||!G[N]||!G[N].findChild,Q=i&&c((function(){return 7!=E(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=k($,t);r&&delete $[t],A(e,t,n),r&&e!==$&&A($,t,r)}:A,Y=function(e){var t=W[e]=E(P[N]);return t._k=e,t},K=z&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},J=function(e,t,n){return e===$&&J(H,t,n),m(e),t=_(t,!0),m(n),o(W,t)?(n.enumerable?(o(e,T)&&e[T][t]&&(e[T][t]=!1),n=E(n,{enumerable:C(0,!1)})):(o(e,T)||A(e,T,C(1,{})),e[T][t]=!0),Q(e,t,n)):A(e,t,n)},q=function(e,t){m(e);var n,r=v(t=w(t)),o=0,i=r.length;while(i>o)J(e,n=r[o++],t[n]);return e},X=function(e,t){return void 0===t?E(e):q(E(e),t)},Z=function(e){var t=B.call(this,e=_(e,!0));return!(this===$&&o(W,e)&&!o(H,e))&&(!(t||!o(this,e)||!o(W,e)||o(this,T)&&this[T][e])||t)},ee=function(e,t){if(e=w(e),t=_(t,!0),e!==$||!o(W,t)||o(H,t)){var n=k(e,t);return!n||!o(W,t)||o(e,T)&&e[T][t]||(n.enumerable=!0),n}},te=function(e){var t,n=R(w(e)),r=[],i=0;while(n.length>i)o(W,t=n[i++])||t==T||t==l||r.push(t);return r},ne=function(e){var t,n=e===$,r=R(n?H:w(e)),i=[],a=0;while(r.length>a)!o(W,t=r[a++])||n&&!o($,t)||i.push(W[t]);return i};z||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===$&&t.call(H,n),o(this,T)&&o(this[T],e)&&(this[T][e]=!1),Q(this,e,C(1,n))};return i&&U&&Q($,e,{configurable:!0,set:t}),Y(e)},s(P[N],"toString",(function(){return this._k})),I.f=ee,L.f=J,n("2ea2").f=S.f=te,n("4f18").f=Z,j.f=ne,i&&!n("550e")&&s($,"propertyIsEnumerable",Z,!0),p.f=function(e){return Y(d(e))}),a(a.G+a.W+a.F*!z,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),oe=0;re.length>oe;)d(re[oe++]);for(var ie=O(d.store),ae=0;ie.length>ae;)y(ie[ae++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return o(D,e+="")?D[e]:D[e]=P(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),a(a.S+a.F*!z,"Object",{create:X,defineProperty:J,defineProperties:q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=c((function(){j.f(1)}));a(a.S+a.F*se,"Object",{getOwnPropertySymbols:function(e){return j.f(x(e))}}),V&&a(a.S+a.F*(!z||c((function(){var e=P();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){var t,n,r=[e],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=t=r[1],(g(t)||void 0!==e)&&!K(e))return b(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,M.apply(V,r)}}),P[N][F]||n("86d4")(P[N],F,P[N].valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},2346:function(e,t,n){var r=n("75c4");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"2cc8":function(e,t,n){},"309f":function(e,t,n){n("4d34")("asyncIterator")},"3e82":function(e,t,n){},"4d34":function(e,t,n){var r=n("e7ad"),o=n("7ddc"),i=n("550e"),a=n("a08d"),s=n("064e").f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"658a":function(e,t,n){"use strict";var r=n("66d9"),o=n.n(r);o.a},"66d9":function(e,t,n){},"753f":function(e,t,n){"use strict";var r=n("3e82"),o=n.n(r);o.a},9370:function(e,t,n){var r=n("09b9"),o=n("2ea2").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(r(e))}},a04a:function(e,t,n){"use strict";var r=n("2cc8"),o=n.n(r);o.a},a08d:function(e,t,n){t.f=n("cb3d")},a370:function(e,t,n){!function(t,n){e.exports=n()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=67)}([function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(25)("wks"),o=n(27),i=n(2).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2),o=n(0),i=n(19),a=n(5),s=n(9),l=function(e,t,n){var c,u,f,h=e&l.F,d=e&l.G,p=e&l.S,y=e&l.P,v=e&l.B,b=e&l.W,m=d?o:o[t]||(o[t]={}),g=m.prototype,x=d?r:p?r[t]:(r[t]||{}).prototype;for(c in d&&(n=t),n)(u=!h&&x&&void 0!==x[c])&&s(m,c)||(f=u?x[c]:n[c],m[c]=d&&"function"!=typeof x[c]?n[c]:v&&u?i(f,r):b&&x[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((m.virtual||(m.virtual={}))[c]=f,e&l.R&&g&&!g[c]&&a(g,c,f)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){var r=n(6),o=n(13);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(7),o=n(35),i=n(36),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(12);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(15);e.exports=function(e){return Object(r(e))}},function(e,t,n){e.exports={default:n(61),__esModule:!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(38),o=n(28);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(25)("keys"),o=n(27);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(34);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(12),o=n(2).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(22),o=n(15);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(16),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(0),o=n(2),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(26)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).f,o=n(9),i=n(1)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){e.exports={default:n(32),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(43),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){n(33),e.exports=n(0).Object.assign},function(e,t,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(37)})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(3)&&!n(8)((function(){return 7!=Object.defineProperty(n(20)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(12);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(3),o=n(14),i=n(41),a=n(42),s=n(10),l=n(22),c=Object.assign;e.exports=!c||n(8)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,u=1,f=i.f,h=a.f;c>u;)for(var d,p=l(arguments[u++]),y=f?o(p).concat(f(p)):o(p),v=y.length,b=0;v>b;)d=y[b++],r&&!h.call(p,d)||(n[d]=p[d]);return n}:c},function(e,t,n){var r=n(9),o=n(21),i=n(39)(!1),a=n(17)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),l=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(21),o=n(24),i=n(40);e.exports=function(e){return function(t,n,a){var s,l=r(t),c=o(l.length),u=i(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var r=n(16),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){e.exports={default:n(44),__esModule:!0}},function(e,t,n){n(45),n(54),e.exports=n(0).Array.from},function(e,t,n){"use strict";var r=n(46)(!0);n(47)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(16),o=n(15);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),l=r(n),c=s.length;return l<0||l>=c?e?"":void 0:(i=s.charCodeAt(l))<55296||i>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):i:e?s.slice(l,l+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(26),o=n(4),i=n(48),a=n(5),s=n(18),l=n(49),c=n(29),u=n(53),f=n(1)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,y,v,b){l(n,t,p);var m,g,x,w=function(e){if(!h&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",C="values"==y,E=!1,S=e.prototype,I=S[f]||S["@@iterator"]||y&&S[y],j=I||w(y),L=y?C?w("entries"):j:void 0,O="Array"==t&&S.entries||I;if(O&&(x=u(O.call(new e)))!==Object.prototype&&x.next&&(c(x,_,!0),r||"function"==typeof x[f]||a(x,f,d)),C&&I&&"values"!==I.name&&(E=!0,j=function(){return I.call(this)}),r&&!b||!h&&!E&&S[f]||a(S,f,j),s[t]=j,s[_]=d,y)if(m={values:C?j:w("values"),keys:v?j:w("keys"),entries:L},b)for(g in m)g in S||i(S,g,m[g]);else o(o.P+o.F*(h||E),t,m);return m}},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";var r=n(50),o=n(13),i=n(29),a={};n(5)(a,n(1)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(7),o=n(51),i=n(28),a=n(17)("IE_PROTO"),s=function(){},l=function(){var e,t=n(20)("iframe"),r=i.length;for(t.style.display="none",n(52).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[i[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(6),o=n(7),i=n(14);e.exports=n(3)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(9),o=n(10),i=n(17)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(19),o=n(4),i=n(10),a=n(55),s=n(56),l=n(24),c=n(57),u=n(58);o(o.S+o.F*!n(60)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,f,h=i(e),d="function"==typeof this?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,v=void 0!==y,b=0,m=u(h);if(v&&(y=r(y,p>2?arguments[2]:void 0,2)),null==m||d==Array&&s(m))for(n=new d(t=l(h.length));t>b;b++)c(n,b,v?y(h[b],b):h[b]);else for(f=m.call(h),n=new d;!(o=f.next()).done;b++)c(n,b,v?a(f,y,[o.value,b],!0):o.value);return n.length=b,n}})},function(e,t,n){var r=n(7);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(18),o=n(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(6),o=n(13);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(59),o=n(1)("iterator"),i=n(18);e.exports=n(0).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(23),o=n(1)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(1)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){n(62),e.exports=n(0).Object.keys},function(e,t,n){var r=n(10),o=n(14);n(63)("keys",(function(){return function(e){return o(r(e))}}))},function(e,t,n){var r=n(4),o=n(0),i=n(8);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(65);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,n(68).default)("d82ef3d4",r,!0,{})},function(e,t,n){(e.exports=n(66)(!1)).push([e.i,'.vjs-checkbox{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-checkbox.is-checked .vjs-checkbox__inner{background-color:#1890ff;border-color:#0076e4}.vjs-checkbox.is-checked .vjs-checkbox__inner:after{transform:rotate(45deg) scaleY(1)}.vjs-checkbox .vjs-checkbox__inner{display:inline-block;position:relative;border:1px solid #bfcbd9;border-radius:2px;vertical-align:middle;box-sizing:border-box;width:16px;height:16px;background-color:#fff;z-index:1;cursor:pointer;transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.vjs-checkbox .vjs-checkbox__inner:after{box-sizing:content-box;content:"";border:2px solid #fff;border-left:0;border-top:0;height:8px;left:4px;position:absolute;top:1px;transform:rotate(45deg) scaleY(0);width:4px;transition:transform .15s cubic-bezier(.71,-.46,.88,.6) .05s;transform-origin:center}.vjs-checkbox .vjs-checkbox__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-radio{position:absolute;left:-30px;color:#1f2d3d;user-select:none}.vjs-radio.is-checked .vjs-radio__inner{background-color:#1890ff;border-color:#0076e4}.vjs-radio.is-checked .vjs-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.vjs-radio .vjs-radio__inner{border:1px solid #bfcbd9;border-radius:100%;width:16px;height:16px;vertical-align:middle;background-color:#fff;position:relative;cursor:pointer;display:inline-block;box-sizing:border-box}.vjs-radio .vjs-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in}.vjs-radio .vjs-radio__original{opacity:0;outline:none;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.vjs-tree{font-family:Monaco,Menlo,Consolas,Bitstream Vera Sans Mono,monospace;font-size:14px}.vjs-tree.is-root{position:relative}.vjs-tree.is-root.has-selectable-control{margin-left:30px}.vjs-tree.is-mouseover{background-color:#e6f7ff}.vjs-tree.is-highlight-selected{background-color:#ccefff}.vjs-tree .vjs-tree__content{padding-left:1em}.vjs-tree .vjs-tree__content.has-line{border-left:1px dotted #bfcbd9}.vjs-tree .vjs-tree__brackets{cursor:pointer}.vjs-tree .vjs-tree__brackets:hover{color:#1890ff}.vjs-tree .vjs-comment{color:#bfcbd9}.vjs-tree .vjs-value__null{color:#ff4949}.vjs-tree .vjs-value__boolean,.vjs-tree .vjs-value__number{color:#1d8ce0}.vjs-tree .vjs-value__string{color:#13ce66}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var i=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(a).concat([i]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){"use strict";n.r(t);var r=n(30),o=n.n(r),i=n(31),a=n.n(i),s=n(11),l=n.n(s);function c(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function u(e,t,n,r,o,i,a,s){var l=typeof(e=e||{}).default;"object"!==l&&"function"!==l||(e=e.default);var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),i&&(u._scopeId=i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:u}}var f=u({props:{showDoubleQuotes:Boolean,parentData:{type:[String,Number,Boolean,Array,Object],default:null},data:{type:[String,Number,Boolean],default:""},showComma:Boolean,currentKey:{type:[Number,String],default:""},customValueFormatter:{type:Function,default:null}},computed:{valueClass:function(){return"vjs-value vjs-value__"+this.dataType},dataType:function(){return c(this.data)}},methods:{defaultFormatter:function(e){var t=e+"";return"string"===this.dataType&&(t='"'+t+'"'),this.showComma&&(t+=","),t},customFormatter:function(e){return this.customValueFormatter?this.customValueFormatter(e,this.currentKey,this.parentData,this.defaultFormatter(e)):this.defaultFormatter(e)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default"),e._v(" "),e.customValueFormatter?n("span",{class:e.valueClass,domProps:{innerHTML:e._s(e.customFormatter(e.data))}}):n("span",{class:e.valueClass},[e._v(e._s(e.defaultFormatter(e.data)))])],2)}),[],!1,null,null,null).exports,h=u({props:{value:{type:Boolean,default:!1}},data:function(){return{focus:!1}},computed:{model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:["vjs-checkbox",e.value?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[n("span",{staticClass:"vjs-checkbox__inner"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"vjs-checkbox__original",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e.model},on:{change:[function(t){var n=e.model,r=t.target,o=!!r.checked;if(Array.isArray(n)){var i=e._i(n,null);r.checked?i<0&&(e.model=n.concat([null])):i>-1&&(e.model=n.slice(0,i).concat(n.slice(i+1)))}else e.model=o},function(t){return e.$emit("change",e.model)}],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})])}),[],!1,null,null,null).exports,d=u({props:{path:{type:String,default:""},value:{type:String,default:""}},data:function(){return{focus:!1}},computed:{currentPath:function(){return this.path},model:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{change:function(){this.$emit("change",this.model)}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:["vjs-radio",e.model===e.currentPath?"is-checked":""],on:{click:function(e){e.stopPropagation()}}},[n("span",{staticClass:"vjs-radio__inner"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"vjs-radio__original",attrs:{type:"radio"},domProps:{value:e.currentPath,checked:e._q(e.model,e.currentPath)},on:{change:[function(t){e.model=e.currentPath},e.change],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})])}),[],!1,null,null,null).exports,p={props:{visible:{required:!0,type:Boolean},data:{required:!0},showComma:Boolean,collapsedOnClickBrackets:Boolean},computed:{dataVisiable:{get:function(){return this.visible},set:function(e){this.collapsedOnClickBrackets&&this.$emit("update:visible",e)}}},methods:{toggleBrackets:function(){this.dataVisiable=!this.dataVisiable},bracketsFormatter:function(e){return this.showComma?e+",":e}}},y=u({mixins:[p],props:{showLength:Boolean},methods:{closedBracketsGenerator:function(e){var t=Array.isArray(e)?"[...]":"{...}";return this.bracketsFormatter(t)},lengthGenerator:function(e){return" // "+(Array.isArray(e)?e.length+" items":l()(e).length+" keys")}}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default"),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.dataVisiable,expression:"dataVisiable"}],staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n    "+e._s(Array.isArray(e.data)?"[":"{")+"\n  ")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.dataVisiable,expression:"!dataVisiable"}]},[n("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n      "+e._s(e.closedBracketsGenerator(e.data))+"\n    ")]),e._v(" "),e.showLength?n("span",{staticClass:"vjs-comment"},[e._v("\n      "+e._s(e.lengthGenerator(e.data))+"\n    ")]):e._e()])],2)}),[],!1,null,null,null).exports,v=u({mixins:[p]},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.dataVisiable,expression:"dataVisiable"}]},[n("span",{staticClass:"vjs-tree__brackets",on:{click:function(t){return t.stopPropagation(),e.toggleBrackets(t)}}},[e._v("\n    "+e._s(e.bracketsFormatter(Array.isArray(e.data)?"]":"}"))+"\n  ")])])}),[],!1,null,null,null),b=u({name:"VueJsonPretty",components:{SimpleText:f,VueCheckbox:h,VueRadio:d,BracketsLeft:y,BracketsRight:v.exports},props:{data:{type:[String,Number,Boolean,Array,Object],default:null},deep:{type:Number,default:1/0},showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},path:{type:String,default:"root"},selectableType:{type:String,default:""},showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},value:{type:[Array,String],default:function(){return""}},pathSelectable:{type:Function,default:function(){return!0}},highlightMouseoverNode:{type:Boolean,default:!1},highlightSelectedNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},customValueFormatter:{type:Function,default:null},parentData:{type:[String,Number,Boolean,Array,Object],default:null},currentDeep:{type:Number,default:1},currentKey:{type:[Number,String],default:""}},data:function(){return{visible:this.currentDeep<=this.deep,isMouseover:!1,currentCheckboxVal:!!Array.isArray(this.value)&&this.value.includes(this.path)}},computed:{model:{get:function(){var e="multiple"===this.selectableType?[]:"single"===this.selectableType?"":null;return this.value||e},set:function(e){this.$emit("input",e)}},lastKey:function(){if(Array.isArray(this.parentData))return this.parentData.length-1;if(this.isObject(this.parentData)){var e=l()(this.parentData);return e[e.length-1]}return""},notLastKey:function(){return this.currentKey!==this.lastKey},selectable:function(){return this.pathSelectable(this.path,this.data)&&(this.isMultiple||this.isSingle)},isMultiple:function(){return"multiple"===this.selectableType},isSingle:function(){return"single"===this.selectableType},isSelected:function(){return this.isMultiple?this.model.includes(this.path):!!this.isSingle&&this.model===this.path},propsError:function(){return!this.selectableType||this.selectOnClickNode||this.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}},watch:{deep:function(e){this.visible=this.currentDeep<=e},propsError:{handler:function(e){if(e)throw new Error("[vue-json-pretty] "+e)},immediate:!0}},methods:{handleValueChange:function(e){var t=this;if(!this.isMultiple||"checkbox"!==e&&"tree"!==e){if(this.isSingle&&("radio"===e||"tree"===e)&&this.model!==this.path){var n=this.model,r=this.path;this.model=r,this.$emit("change",r,n)}}else{var o=this.model.findIndex((function(e){return e===t.path})),i=[].concat(a()(this.model));-1!==o?this.model.splice(o,1):this.model.push(this.path),"checkbox"!==e&&(this.currentCheckboxVal=!this.currentCheckboxVal),this.$emit("change",this.model,i)}},handleClick:function(e){e._uid&&e._uid!==this._uid||(e._uid=this._uid,this.$emit("click",this.path,this.data),this.selectable&&this.selectOnClickNode&&this.handleValueChange("tree"))},handleItemClick:function(e,t){this.$emit("click",e,t)},handleItemChange:function(e,t){this.selectable&&this.$emit("change",e,t)},handleMouseover:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!0)},handleMouseout:function(){this.highlightMouseoverNode&&(this.selectable||""===this.selectableType)&&(this.isMouseover=!1)},isObject:function(e){return"object"===c(e)},keyFormatter:function(e){return this.showDoubleQuotes?'"'+e+'"':e}},errorCaptured:function(){return!1}},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"vjs-tree":!0,"has-selectable-control":e.isMultiple||e.showSelectController,"is-root":1===e.currentDeep,"is-selectable":e.selectable,"is-selected":e.isSelected,"is-highlight-selected":e.isSelected&&e.highlightSelectedNode,"is-mouseover":e.isMouseover},on:{click:e.handleClick,mouseover:function(t){return t.stopPropagation(),e.handleMouseover(t)},mouseout:function(t){return t.stopPropagation(),e.handleMouseout(t)}}},[e.showSelectController&&e.selectable?[e.isMultiple?n("vue-checkbox",{on:{change:function(t){return e.handleValueChange("checkbox")}},model:{value:e.currentCheckboxVal,callback:function(t){e.currentCheckboxVal=t},expression:"currentCheckboxVal"}}):e.isSingle?n("vue-radio",{attrs:{path:e.path},on:{change:function(t){return e.handleValueChange("radio")}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e()]:e._e(),e._v(" "),Array.isArray(e.data)||e.isObject(e.data)?[n("brackets-left",{attrs:{visible:e.visible,data:e.data,"show-length":e.showLength,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"show-comma":e.notLastKey},on:{"update:visible":function(t){e.visible=t}}},[e.currentDeep>1&&!Array.isArray(e.parentData)?n("span",{staticClass:"vjs-key"},[e._v("\n        "+e._s(e.keyFormatter(e.currentKey))+":\n      ")]):e._e()]),e._v(" "),e._l(e.data,(function(t,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],key:r,class:{"vjs-tree__content":!0,"has-line":e.showLine}},[n("vue-json-pretty",{attrs:{"parent-data":e.data,data:t,deep:e.deep,"show-length":e.showLength,"show-double-quotes":e.showDoubleQuotes,"show-line":e.showLine,"highlight-mouseover-node":e.highlightMouseoverNode,"highlight-selected-node":e.highlightSelectedNode,path:e.path+(Array.isArray(e.data)?"["+r+"]":"."+r),"path-selectable":e.pathSelectable,"selectable-type":e.selectableType,"show-select-controller":e.showSelectController,"select-on-click-node":e.selectOnClickNode,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"current-key":r,"current-deep":e.currentDeep+1,"custom-value-formatter":e.customValueFormatter},on:{click:e.handleItemClick,change:e.handleItemChange},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)})),e._v(" "),n("brackets-right",{attrs:{visible:e.visible,data:e.data,"collapsed-on-click-brackets":e.collapsedOnClickBrackets,"show-comma":e.notLastKey},on:{"update:visible":function(t){e.visible=t}}})]:n("simple-text",{attrs:{"custom-value-formatter":e.customValueFormatter,"show-double-quotes":e.showDoubleQuotes,"show-comma":e.notLastKey,"parent-data":e.parentData,data:e.data,"current-key":e.currentKey}},[e.parentData&&e.currentKey&&!Array.isArray(e.parentData)?n("span",{staticClass:"vjs-key"},[e._v("\n      "+e._s(e.keyFormatter(e.currentKey))+":\n    ")]):e._e()])],2)}),[],!1,null,null,null).exports;n(64),t.default=o()({},b,{version:"1.6.7"})},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=i[0],s={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.r(t),n.d(t,"default",(function(){return d}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,c=!1,u=function(){},f=null,h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(e,t,n,o){c=n,f=o||{};var a=r(e,t);return p(a),function(t){for(var n=[],o=0;o<a.length;o++){var s=a[o];(l=i[s.id]).refs--,n.push(l)}for(t?p(a=r(e,t)):a=[],o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=i[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(v(n.parts[o]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(o=0;o<n.parts.length;o++)a.push(v(n.parts[o]));i[n.id]={id:n.id,refs:1,parts:a}}}}function y(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(c)return u;r.parentNode.removeChild(r)}if(h){var o=l++;r=s||(s=y()),t=g.bind(null,r,o,!1),n=g.bind(null,r,o,!0)}else r=y(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var b,m=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function g(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=m(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function x(e,t){var n=t.css,r=t.media,o=t.sourceMap;if(r&&e.setAttribute("media",r),f.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}])}))},af64:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-annotation flex-layout"},[n("el-form",[n("el-button",{attrs:{type:"trimary"},on:{click:e.doadd}},[e._v("")])],1),n("div",{staticClass:"flex-auto table-wrap"},[n("el-table",{attrs:{data:e.annotList,height:"100%"}},[n("el-table-column",{attrs:{label:"",prop:"username"}}),n("el-table-column",{attrs:{label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                    "+e._s(t.row.annotation&&t.row.annotation.content.slice(0,20))+"\r\n                ")]}}])}),n("el-table-column",{attrs:{label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.doedit(t.row)}}},[e._v("")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.dodel(t.row._id)}}},[e._v("")])]}}])})],1)],1),n("annot-detail",{ref:"detail",on:{refresh:e.refresh}})],1)},o=[],i=(n("6a61"),n("cf7f")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("block-detail",{staticClass:"component-annot-detail",attrs:{visible:e.visible,title:""},on:{"update:visible":function(t){e.visible=t}}},[e.edata?n("div",{staticClass:"annot abs-full-block"},[n("annot",{staticClass:"full-block",attrs:{json_data:e.edata.annotation,json_show:!0},on:{"update:json_data":function(t){return e.$set(e.edata,"annotation",t)},confirm:e.annotConfirm}})],1):e._e()])},s=[],l=n("f7f9"),c=n("440a"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible_?n("div",{staticClass:"component-block-detail abs-full-block flex-layout"},[n("div",{staticClass:"header flex-none flex-layout frow"},[n("div",{staticClass:"title flex-auto"},[e._v("\r\n            "+e._s(e.title)+"\r\n        ")]),n("div",{staticClass:"close flex-none",on:{click:e.close}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"centent flex-auto"},[e._t("default")],2),e.$slots.footer?n("div",{staticClass:"footer flex-none"},[e._v('"footer"/>\r\n    ')]):e._e()]):e._e()},f=[],h={name:"block-detail",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""}},data:function(){return{}},computed:{visible_:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{close:function(){this.visible_=!1}},watch:{visible_:function(e,t){this.$emit("open"),this.$emit("opened")}}},d=h,p=(n("658a"),n("9ca4")),y=Object(p["a"])(d,u,f,!1,null,"4369758c",null),v=y.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-annot flex-layout"},[n("div",{staticClass:"centent flex-auto flex-layout frow"},[n("div",{directives:[{name:"resize",rawName:"v-resize:throttle",value:e.onResize,expression:"onResize",arg:"throttle"}],staticClass:"flex-mean scroll-y"},[n("div",{ref:"container",staticClass:"container"})]),e.json_show?n("div",{staticClass:"flex-mean scroll-y"},[n("vue-json-pretty",{attrs:{data:e.jsonData}})],1):e._e()]),n("div",{staticClass:"flex-none bnt-nav"},[n("el-button",{attrs:{type:"primary"},on:{click:e.download}},[e._v(" JSON")]),n("el-button",{attrs:{type:"primary"},on:{click:e.downloadSVG}},[e._v(" SVG")]),n("el-button",{attrs:{type:"primary"},on:{click:e.uploadClick}},[n("i",{staticClass:"el-icon-upload"}),e._v("")]),n("el-button",{attrs:{type:"primary"},on:{click:e.useDefault}},[e._v(" ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("")])],1),n("div",{staticClass:"dialog-wrap flex-none"},[n("el-dialog",{attrs:{title:"",width:"250px",visible:e.showLabelCategoriesDialog},on:{"update:visible":function(t){e.showLabelCategoriesDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showLabelCategoriesDialog=!1}}},[e._v("\r\n                    \r\n                ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addLabel}},[e._v("\r\n                    \r\n                ")])]},proxy:!0}])},[n("el-radio-group",{model:{value:e.selectedLabelCategory,callback:function(t){e.selectedLabelCategory=t},expression:"selectedLabelCategory"}},e._l(this.labelCategories,(function(t){return n("div",[n("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.text))])],1)})),0)],1),n("el-dialog",{attrs:{title:"",width:"250px",visible:e.showConnectionCategoriesDialog},on:{"update:visible":function(t){e.showConnectionCategoriesDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showConnectionCategoriesDialog=!1}}},[e._v("\r\n                    \r\n                ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addConnection}},[e._v("\r\n                    \r\n                ")])]},proxy:!0}])},[n("el-radio-group",{model:{value:e.selectedConnectionCategory,callback:function(t){e.selectedConnectionCategory=t},expression:"selectedConnectionCategory"}},e._l(this.connectionCategories,(function(t){return n("div",[n("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.text))])],1)})),0)],1),n("el-dialog",{attrs:{title:"",visible:e.cententVisible},on:{"update:visible":function(t){e.cententVisible=t},close:e.cententClose},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"primary"},on:{click:e.cententConfirm}},[e._v("\r\n                    \r\n                ")])]},proxy:!0}])},[e.jsonData?n("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.jsonData.content,callback:function(t){e.$set(e.jsonData,"content",t)},expression:"jsonData.content"}}):e._e()],1)],1)])},m=[];n("6d57"),n("309f"),n("0b53"),n("06a2"),n("ec25"),n("cc57"),n("2b45");function g(e){if(Array.isArray(e))return e}function x(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if(n.push(a.value),t&&n.length===t)break}catch(l){o=!0,i=l}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return g(e)||x(e,t)||_(e,t)||C()}var S=n("0844");function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{version:"0.0.1",content:e,labelCategories:[{id:0,text:"",color:"#eac0a2",borderColor:"#a38671"},{id:1,text:"",color:"#619dff",borderColor:"#436db2"},{id:2,text:"",color:"#9d61ff",borderColor:"#6d43b2"},{id:3,text:"",color:"#ff9d61",borderColor:"#b26d43"}],labels:[],connectionCategories:[{id:0,text:""},{id:1,text:""},{id:2,text:"..."}],connections:[]}}var j,L={content:"\n\n\n\n\n",labelCategories:[{id:0,text:"",color:"#eac0a2",borderColor:"#a38671"},{id:1,text:"",color:"#619dff",borderColor:"#436db2"},{id:2,text:"",color:"#9d61ff",borderColor:"#6d43b2"},{id:3,text:"",color:"#ff9d61",borderColor:"#b26d43"}],labels:[{id:0,categoryId:0,startIndex:0,endIndex:2},{id:1,categoryId:0,startIndex:3,endIndex:4},{id:6,categoryId:0,startIndex:32,endIndex:33},{id:7,categoryId:1,startIndex:46,endIndex:47},{id:9,categoryId:1,startIndex:64,endIndex:65},{id:10,categoryId:0,startIndex:217,endIndex:218},{id:11,categoryId:0,startIndex:220,endIndex:221},{id:12,categoryId:2,startIndex:218,endIndex:219},{id:13,categoryId:2,startIndex:221,endIndex:222},{id:14,categoryId:0,startIndex:79,endIndex:81},{id:15,categoryId:2,startIndex:84,endIndex:86}],connectionCategories:[{id:0,text:""},{id:1,text:""},{id:2,text:"..."}],connections:[{id:0,categoryId:2,fromId:7,toId:6},{id:3,categoryId:2,fromId:9,toId:6},{id:4,categoryId:0,fromId:12,toId:10},{id:5,categoryId:0,fromId:13,toId:11},{id:6,categoryId:0,fromId:15,toId:14}]},O=n("a370"),k=n.n(O),A=n("a593");function R(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=P(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function P(e,t){if(e){if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(function(e){e[e["Create"]=0]="Create",e[e["Update"]=1]="Update"})(j||(j={}));var M=A["default"].extend({name:"annot",components:{vueJsonPretty:k.a},props:{json_data:{type:Object},json_show:{type:Boolean,default:!1}},data:function(){return{annotator:null,selectedLabelCategory:null,selectedConnectionCategory:null,showLabelCategoriesDialog:!1,showConnectionCategoriesDialog:!1,json:"",startIndex:-1,endIndex:-1,first:-1,second:-1,categorySelectMode:j.Create,selectedId:-1,cententVisible:!1,cententPromise:null}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){this.annotatorRefresh()},computed:{jsonData:{get:function(){return this.json_data},set:function(e){this.$emit("update:json_data",e)}},labelCategories:function(){if(null===this.annotator)return[];var e,t=[],n=R(this.annotator.store.labelCategoryRepo);try{for(n.s();!(e=n.n()).done;){var r=E(e.value,2),o=(r[0],r[1]);t.push(o)}}catch(i){n.e(i)}finally{n.f()}return t},connectionCategories:function(){if(null===this.annotator)return[];var e,t=[],n=R(this.annotator.store.connectionCategoryRepo);try{for(n.s();!(e=n.n()).done;){var r=E(e.value,2),o=(r[0],r[1]);t.push(o)}}catch(i){n.e(i)}finally{n.f()}return t}},methods:{addLabel:function(){this.categorySelectMode===j.Update?this.annotator.applyAction(S["Action"].Label.Update(this.selectedId,this.selectedLabelCategory)):this.annotator.applyAction(S["Action"].Label.Create(this.selectedLabelCategory,this.startIndex,this.endIndex)),this.showLabelCategoriesDialog=!1},addConnection:function(){this.categorySelectMode===j.Update?this.annotator.applyAction(S["Action"].Connection.Update(this.selectedId,this.selectedConnectionCategory)):this.annotator.applyAction(S["Action"].Connection.Create(this.selectedConnectionCategory,this.from,this.to)),this.showConnectionCategoriesDialog=!1},createAnnotator:function(){var e=this,t=new S["Annotator"](this.jsonData,this.$refs.container);return t.on("textSelected",(function(t,n){e.startIndex=t,e.endIndex=n,e.categorySelectMode=j.Create,e.showLabelCategoriesDialog=!0})),t.on("twoLabelsClicked",(function(t,n){e.from=t,e.to=n,e.categorySelectMode=j.Create,e.showConnectionCategoriesDialog=!0})),t.on("labelRightClicked",(function(n,r){r.ctrlKey?(e.categorySelectMode=j.Update,e.selectedId=n,e.showLabelCategoriesDialog=!0):t.applyAction(S["Action"].Label.Delete(n))})),t.on("connectionRightClicked",(function(n,r){r.ctrlKey?(e.categorySelectMode=j.Update,e.selectedId=n,e.showConnectionCategoriesDialog=!0):t.applyAction(S["Action"].Connection.Delete(n))})),t.on("contentInput",(function(e,n){t.applyAction(S["Action"].Content.Splice(e,0,n))})),t.on("contentDelete",(function(e,n){t.applyAction(S["Action"].Content.Splice(e,n,""))})),t},uploadClick:function(e){var t=document.createElement("input");t.type="file",t.multiple=!1,t.addEventListener("change",this.uploadFile),t.click()},uploadFile:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0]),n.onload=function(e){t.loadJSON(JSON.parse(e.target.result.toString()))}},annotatorRefresh:function(){this.annotator&&(this.annotator.remove(),this.annotator=null),null!==this.jsonData&&this.jsonData.content&&(this.annotator=this.createAnnotator())},loadJSON:function(e){this.jsonData=e,this.annotatorRefresh()},download:function(){var e=document.createElement("a");e.download="data.json",e.style.display="none";var t=new Blob([JSON.stringify(this.annotator.store.json,null,4)]);e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},downloadSVG:function(){var e=document.createElement("a");e.download="data.svg",e.style.display="none";var t=new Blob([this.annotator.export()]);e.href=URL.createObjectURL(t),document.body.appendChild(e),e.click(),document.body.removeChild(e)},useDefault:function(){this.loadJSON(L)},onResize:function(){this.annotatorRefresh()},confirm:function(){this.annotator&&(this.jsonData=this.annotator.store.json),this.$emit("confirm")},cententClose:function(){this.cententPromise&&this.cententPromise.reject()},cententConfirm:function(){this.jsonData.content.length?(this.cententVisible=!1,this.cententPromise&&this.cententPromise.resolve()):this.$alert("")},editContent:function(){var e=this;if(!this.cententVisible){this.cententVisible=!0,this.cententPromise={};var t=this,n=new Promise((function(e,r){t.cententPromise={promise:n,resolve:e,reject:r}}));n.then((function(){e.annotatorRefresh(),e.cententPromise=null}))}}},watch:{"jsonData.content":{handler:function(e,t){""===e&&this.editContent()},immediate:!0},jsonData:{handler:function(e,t){e||this.loadJSON(I())},immediate:!0}}}),N=M,T=(n("c470"),Object(p["a"])(N,b,m,!1,null,"d30e584c",null)),F=T.exports,B={name:"annot-detail",components:{blockDetail:v,annot:F},props:{},data:function(){return{visible:!1,edata:null}},methods:{show:function(e){if("object"==Object(l["a"])(e)&&e&&e._id)this.edata=c["a"].CloneDeepObj(e);else if("string"!=typeof e)throw console.log(e),new window.Error("type error");this.visible=!0},annotConfirm:function(){var e=this;this.$nextTick(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.annotationUpdate(e.edata);case 2:e.visible=!1,e.$emit("refresh");case 4:case"end":return t.stop()}}),t)}))))}}},D=B,W=(n("a04a"),Object(p["a"])(D,a,s,!1,null,"480db196",null)),H=W.exports,$=A["default"].extend({name:"annotation",components:{annotDetail:H},data:function(){return{jsonData:null,annotList:[]}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.refresh();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{},methods:{refresh:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.annotationRetrive();case 2:t=e.sent,this.annotList=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doadd:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.axios.annotationCreate();case 2:t=e.sent,this.$refs.detail.show(t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doedit:function(e){this.$refs.detail.show(e)},dodel:function(e){var t=this;Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.annotationDelete(e);case 2:t.refresh();case 3:case"end":return n.stop()}}),n)})))()}}}),z=$,G=(n("753f"),Object(p["a"])(z,r,o,!1,null,"2f41497c",null));t["default"]=G.exports},c470:function(e,t,n){"use strict";var r=n("faf5"),o=n.n(r);o.a},cc57:function(e,t,n){var r=n("064e").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,a="name";a in o||n("149f")&&r(o,a,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},ec25:function(e,t,n){"use strict";var r=n("4ce5"),o=n("e46b"),i=n("008a"),a=n("d0bc"),s=n("2285"),l=n("eafa"),c=n("ebc3"),u=n("f878");o(o.S+o.F*!n("d0c5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,f,h=i(e),d="function"==typeof this?this:Array,p=arguments.length,y=p>1?arguments[1]:void 0,v=void 0!==y,b=0,m=u(h);if(v&&(y=r(y,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&s(m))for(t=l(h.length),n=new d(t);t>b;b++)c(n,b,v?y(h[b],b):h[b]);else for(f=m.call(h),n=new d;!(o=f.next()).done;b++)c(n,b,v?a(f,y,[o.value,b],!0):o.value);return n.length=b,n}})},f091:function(e,t,n){var r=n("80a9"),o=n("2f77"),i=n("4f18");e.exports=function(e){var t=r(e),n=o.f;if(n){var a,s=n(e),l=i.f,c=0;while(s.length>c)l.call(e,a=s[c++])&&t.push(a)}return t}},f71f:function(e,t,n){var r=n("ec45")("meta"),o=n("fb68"),i=n("e042"),a=n("064e").f,s=0,l=Object.isExtensible||function(){return!0},c=!n("238a")((function(){return l(Object.preventExtensions({}))})),u=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},h=function(e,t){if(!i(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},d=function(e){return c&&p.NEED&&l(e)&&!i(e,r)&&u(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},faf5:function(e,t,n){}}]);
//# sourceMappingURL=chunk-42caf899.7d9e4b52.js.map